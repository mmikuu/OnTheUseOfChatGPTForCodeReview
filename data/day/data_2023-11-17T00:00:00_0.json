{
    "data": {
        "search": {
            "edges": [
                {
                    "node": {
                        "number": 1,
                        "title": "Add Prompting 101 Tile to independent-ai-topics",
                        "repository": {
                            "nameWithOwner": "Ada-Developers-Academy/independent-ai-topics",
                            "primaryLanguage": null
                        },
                        "createdAt": "2023-11-17T23:32:04Z",
                        "mergedAt": "2023-11-21T22:35:00Z",
                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1",
                        "state": "MERGED",
                        "author": {
                            "login": "kelsey-steven-ada"
                        },
                        "editor": {
                            "login": "kelsey-steven-ada"
                        },
                        "body": "[Addresses this Asana ticket](https://app.asana.com/0/1201700438643002/1205889394913675/f)\r\n\r\nI'd particularly love feedback around the challenge questions and if they seem useful =]",
                        "comments": {
                            "nodes": []
                        },
                        "reviews": {
                            "edges": [
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "Amazingggg work on this, Kelsey!! Reading through this makes me super excited about getting this in front of students. It's gonna be really cool to see the various ways that folx will utilize this tool.\nI left a few suggestions; nothing major jumped out at me. Thank you so much!",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "The last sentence was a bit difficult for me to parse the first time reading it. What do you think of this small change?\n  \n    \n      \n        Suggested change\n      \n    \n    \n      \n          \n            \n            - There are legal considerations if we use AI tools for public work or businesses. Many tools have been trained on massive data sets with text, art and other works scraped from the internet without legal clearance. Unless a tool has been built solely with data that has been given permission to be used for training and generation, it may not be legal to use the art or text generated by an AI tool verbatim. \n          \n          \n            \n            - There are legal considerations if we use AI tools for public work or businesses. Many tools have been trained on massive data sets with text, art and other works scraped from the internet without legal clearance. Using the art or text generated by an AI tool verbatim may be legally restricted unless the tool has been exclusively constructed with data that has been authorized for training and generation.",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399839290",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            1. Our first step is to visit [chat.openai.com](chat.openai.com) and press the \"Sign Up\" button to start creating an account. \n          \n          \n            \n            1. Our first step is to visit [chat.openai.com](https://chat.openai.com) and press the \"Sign Up\" button to start creating an account.",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399846136",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            5. You can log in with your new account at [chat.openai.com](chat.openai.com) once your email is verified. The first time you log in, you'll be asked to enter your first name, last name, and birth date to verify your age.\n          \n          \n            \n            5. You can log in with your new account at [chat.openai.com](https://chat.openai.com) once your email is verified. The first time you log in, you'll be asked to enter your first name, last name, and birth date to verify your age.",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399846843",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            8. At this point you should be redirected a brand new chat page! We should see \"ChatGPT 3.5\" at the top, letting us know we are working with OpenAI's 3.5 model. \n          \n          \n            \n            8. At this point you should be redirected to a brand new chat page! We should see \"ChatGPT 3.5\" at the top, letting us know we are working with OpenAI's 3.5 model.",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399847966",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            The first number indicates how many versions of the response there are, and the second number is which version of the response we are currently viewing. The arrows are buttons that let us navigate forwards and backwards through the responses so we can see all of the versions.\n          \n          \n            \n            The second number indicates how many versions of the response there are, and the first number is which version of the response we are currently viewing. The arrows are buttons that let us navigate forwards and backwards through the responses so we can see all of the versions.\n          \n          \n            \n            \n          \n          \n            \n            For example, if we generate a response 3 times, when the indicator shows `< 1 / 3 >`, this means we are viewing the first output of the prompt, `< 2 / 3 >` means we are viewing the second output of the prompt, and so on.",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399851712",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            This incorrect answer is clearly not desired, but we can often get to a correct response for this question by asking the AI tool to show it's work and reason itself to a correct answer. Try out this updated prompt in either the same chat or a new one:\n          \n          \n            \n            This incorrect answer is clearly not desired, but we can often get to a correct response for this question by asking the AI tool to show its work and reason itself to a correct answer. Try out this updated prompt in either the same chat or a new one:",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399864181",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "I was a bit lost reading this section because I wasn't entirely sure what the prompt to Chat was - is it literally the list of feedback with no other context?",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399869273",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            When doing our own searching, we also need to be asking ourselves if the sources we\u2019re using to verify information are trustworthy. Anyone can publish anything on the internet, but there are frameworks we can use to ask ourselves questions about a website or source to help us investigate if it may be worthwhile. Once such framework is the SMART Check:\n          \n          \n            \n            When doing our own searching, we also need to be asking ourselves if the sources we\u2019re using to verify information are trustworthy. Anyone can publish anything on the internet, but there are frameworks we can use to ask ourselves questions about a website or source to help us investigate if it may be worthwhile. One such framework is the SMART Check:",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399885510",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            Generative AI tools are very powerful, but at this stage, there are several issues around hallucinations, the cutoff date of their training data, inability connect to the internet to gather new or further information, and inability to share sources from their training data, which together mean that we cannot trust any facts that they state without verification. \n          \n          \n            \n            Generative AI tools are very powerful, but at this stage, there are several issues around hallucinations, the cutoff date of their training data, inability to connect to the internet to gather new or further information, and inability to share sources from their training data, which together mean that we cannot trust any facts that they state without verification.",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399886829",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            * S\n          \n          \n            \n            * S - Scope",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399887631",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            * M\n          \n          \n            \n            * M - Motivation",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399887711",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            * A\n          \n          \n            \n            * A - Authority & Accuracy",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399887812",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            * R\n          \n          \n            \n            * R - Relevancy & Reliability",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399887913",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            * T\n          \n          \n            \n            * T - Timely",
                                                        "author": {
                                                            "login": "char-adadev"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1399887987",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "That reads much clearer to me too, thanks!",
                                                        "author": {
                                                            "login": "kelsey-steven-ada"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1400924794",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Thanks for catching the number/position swap here, the added example is really helpful. \ud83d\ude4f\ud83c\udffb",
                                                        "author": {
                                                            "login": "kelsey-steven-ada"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1400932230",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            * T\n          \n          \n            \n            * T - Timely",
                                                        "author": {
                                                            "login": "kelsey-steven-ada"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1400935597",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "17ccdd5",
                                                            "authoredDate": "2023-11-21T17:21:49Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "That's exactly what's happening, the prompt is literally just the feedback. Would it be helpful to include a sentence before we show the example around \"a prompt can be just data without instructions\"?",
                                                        "author": {
                                                            "login": "kelsey-steven-ada"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1400939942",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Edit: I added the line as a suggestion on the PR so it's easier to see/review.\nI'm thinking above the feedback when introducing the example, we could start the paragraph with something like:\n\nWe're going to look at a prompt that's different from others we've seen \u2013 this time we're not going to include any direct instructions on what the generative AI should do. Let's say that we moderate a forum...",
                                                        "author": {
                                                            "login": "kelsey-steven-ada"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1400947660",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            Let's say that we moderate a forum and want to categorize feedback from our users. We're going start from a zero-shot prompt and iterate on it until we have a few-shot prompt. For our example, we have a list of feedback like:\n          \n          \n            \n            We're going to look at a prompt that's different from others we've seen \u2013 this time we're not going to include any instructions telling the generative AI what it should do. Let's say that we moderate a forum and want to categorize feedback from our users. We're going start from a zero-shot prompt and iterate on it until we have a few-shot prompt. For our example, we have a list of feedback like:",
                                                        "author": {
                                                            "login": "kelsey-steven-ada"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1400952024",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "fb0df64",
                                                            "authoredDate": "2023-11-21T17:32:46Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            If we include no examples, no instructions, and simply submit our list of feedback as a prompt, generative AI tools like ChatGPT will still try to provide a helpful response, likely about how to address these pieces of user feedback. \n          \n          \n            \n            If we include no examples, no instructions, and submit our list of feedback itself as the prompt, generative AI tools like ChatGPT will still try to provide a helpful response, likely about how to address these pieces of user feedback.",
                                                        "author": {
                                                            "login": "kelsey-steven-ada"
                                                        },
                                                        "url": "https://github.com/Ada-Developers-Academy/independent-ai-topics/pull/1#discussion_r1401093209",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "29aeedc",
                                                            "authoredDate": "2023-11-20T19:54:30Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        }
                    ]
                },
                {
                    "node": {
                        "number": 3275,
                        "title": "Add California alternative minimum tax (AMT)",
                        "repository": {
                            "nameWithOwner": "PolicyEngine/policyengine-us",
                            "primaryLanguage": {
                                "name": "Python"
                            }
                        },
                        "createdAt": "2023-11-17T18:39:08Z",
                        "mergedAt": "2024-02-25T23:55:12Z",
                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275",
                        "state": "MERGED",
                        "author": {
                            "login": "LeqiGogo"
                        },
                        "editor": null,
                        "body": "Fixes #3273\n\n<!--\ncopilot:all\n-->\n### <samp>\ud83e\udd16[[deprecated]](https://githubnext.com/copilot-for-prs-sunset) Generated by Copilot at 0fa9ef0</samp>\n\n### Summary\n\ud83d\udcc4\ud83e\uddee\ud83d\udcb0\n\n<!--\n1.  \ud83d\udcc4 - This emoji represents the addition of new YAML and Python files for the parameters and variables of the California AMT. It conveys the idea of creating new documents or files.\n2.  \ud83e\uddee - This emoji represents the calculation of the alternative minimum tax, the alternative minimum taxable income, the exemption amount, and the itemized deductions limitation. It conveys the idea of performing arithmetic operations or computations.\n3.  \ud83d\udcb0 - This emoji represents the money or tax implications of the California AMT. It conveys the idea of financial or economic matters or outcomes.\n-->\nThis pull request adds the parameters and variables for the California alternative minimum tax (AMT) to the policy engine. The AMT is a parallel tax system that applies to certain high-income filers who have large deductions or preferences. The pull request creates YAML files for the AMT parameters and Python files for the AMT variables, following the structure and conventions of the policy engine. The files include the descriptions, values, formulas, references, and metadata for the AMT components.\n\n> _`ca_amt` added_\n> _YAML and Python files_\n> _Autumn tax reform_\n\n### Walkthrough\n*  Add new parameters and variables for the California alternative minimum tax (AMT) ([link](https://github.com/PolicyEngine/policyengine-us/pull/3275/files?diff=unified&w=0#diff-7ddea6aa7fa5c09a189ec47fff6c0a9864d1c9057361d7a26448aa113438835eL1-R17)-[link](https://github.com/PolicyEngine/policyengine-us/pull/3275/files?diff=unified&w=0#diff-5d1bdc35e0daf68594361215e8798a209be0b9b43b0f7bb5ab0bdfa45d849763L1-R14), [link](https://github.com/PolicyEngine/policyengine-us/pull/3275/files?diff=unified&w=0#diff-67f02ca20a9c72c658d0cc400af5db8d8229b24a5c727507995d3716d21ed023L1-R23)-[link](https://github.com/PolicyEngine/policyengine-us/pull/3275/files?diff=unified&w=0#diff-5959289448a09bb23e84a77b9959be925867857452aeff9e1041c75286d0e74aL1-R22))\n  * Add YAML files for the age threshold, AMTI rate, AMTI sources, exemption amount, exemption amount thresholds, itemized deductions threshold, and tentative minimum tax rate parameters ([link](https://github.com/PolicyEngine/policyengine-us/pull/3275/files?diff=unified&w=0#diff-7ddea6aa7fa5c09a189ec47fff6c0a9864d1c9057361d7a26448aa113438835eL1-R17)-[link](https://github.com/PolicyEngine/policyengine-us/pull/3275/files?diff=unified&w=0#diff-5d1bdc35e0daf68594361215e8798a209be0b9b43b0f7bb5ab0bdfa45d849763L1-R14))\n  * Add Python files for the ca_amt, ca_amti, ca_amti_calc, exemption_amount_high_amti, exemption_child_eligible, itemized_ded_limitation, and total_adjustments variables ([link](https://github.com/PolicyEngine/policyengine-us/pull/3275/files?diff=unified&w=0#diff-67f02ca20a9c72c658d0cc400af5db8d8229b24a5c727507995d3716d21ed023L1-R23)-[link](https://github.com/PolicyEngine/policyengine-us/pull/3275/files?diff=unified&w=0#diff-5959289448a09bb23e84a77b9959be925867857452aeff9e1041c75286d0e74aL1-R22))\n\n\n",
                        "comments": {
                            "nodes": [
                                {
                                    "createdAt": "2023-11-17T18:47:56Z",
                                    "bodyText": "Codecov Report\nAll modified and coverable lines are covered by tests \u2705\n\nProject coverage is 99.12%. Comparing base (7c734c3) to head (7d70f43).\n\nAdditional details and impacted files\n@@           Coverage Diff            @@\n##           master    #3275    +/-   ##\n========================================\n  Coverage   99.11%   99.12%            \n========================================\n  Files        2310     2316     +6     \n  Lines       33547    33654   +107     \n  Branches      158      159     +1     \n========================================\n+ Hits        33251    33358   +107     \n  Misses        263      263            \n  Partials       33       33            \n\n\u2614 View full report in Codecov by Sentry.\n\ud83d\udce2 Have feedback on the report? Share it here.",
                                    "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#issuecomment-1816922155",
                                    "author": {
                                        "login": "codecov"
                                    }
                                },
                                {
                                    "createdAt": "2023-11-22T18:10:38Z",
                                    "bodyText": "Legal code: https://casetext.com/statute/california-codes/california-revenue-and-taxation-code/division-2-other-taxes/part-10-personal-income-tax/chapter-21-alternative-minimum-tax",
                                    "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#issuecomment-1823250343",
                                    "author": {
                                        "login": "PavelMakarchuk"
                                    }
                                },
                                {
                                    "createdAt": "2024-02-14T00:00:02Z",
                                    "bodyText": "please review our code for the federal AMT. it looks like much of this derives from that. TCJA may have modified some parts of the federal AMT that california held on to, so it may be helpful to add references to the federal AMT parameters as part of this PR to determine how much can power the CA AMT computation. i suspect you can remove a fair bit of parameters and maybe logic (via branching) by referencing more federal code.\n\nI have adjusted the child exemption related parameters to represent the legal code",
                                    "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#issuecomment-1942874733",
                                    "author": {
                                        "login": "PavelMakarchuk"
                                    }
                                }
                            ]
                        },
                        "reviews": {
                            "edges": [
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            class itemized_ded_limitation(Variable):\n          \n          \n            \n            class ca_itemized_ded_limitation(Variable):",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416402674",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                label = \"CA itemized deductions limitation\"\n          \n          \n            \n                label = \"California itemized deductions limitation\"",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416402778",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    itemized_ded_limitation = where(tax_unit(\"ca_agi\", period) < p.itemized_ded_threshold[filing_status],\n          \n          \n            \n                    return where(tax_unit(\"ca_agi\", period) < p.itemized_ded_threshold[filing_status],",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416402854",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    total_adjustments = where(tax_unit(\"ca_itemized_deductions\", period) > 0, \n          \n          \n            \n                    return where(tax_unit(\"ca_itemized_deductions\", period) > 0,",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416402926",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            class total_adjustments(Variable):\n          \n          \n            \n            class ca_total_adjustments(Variable):",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416402984",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                label = \"CA total adjustments and preferences for AMTI calculation\"\n          \n          \n            \n                label = \"California total adjustments and preferences for AMTI calculation\"",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416403033",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            class exemption_child_eligible(Variable):\n          \n          \n            \n            class ca_exemption_child_eligible(Variable):",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416403124",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                label = \"Eligiblity for California Minimum exemption amount for children\"\n          \n          \n            \n                label = \"Eligible person for the California Minimum exemption amount\"",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416403290",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            class exemption_amount_high_amti(Variable):\n          \n          \n            \n            class ca_exemption_amount_high_amti(Variable):",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416403447",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                label = \"CA exemption amount for AMTI higher than threshold\"\n          \n          \n            \n                label = \"California exemption amount for AMTI higher than threshold\"",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416403702",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "make this a where statement unless this is copies from a federal file",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416403988",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    amti_before_ded = total_adjustments + taxable_income + itemized_ded_limitation # line 19\n          \n          \n            \n                   return total_adjustments + taxable_income + itemized_ded_limitation # line 19",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416404044",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    alternative_minimum_tax = max_(tentative_minimum_tax - regular_tax_before_credits, 0)\n          \n          \n            \n                    return max_(tentative_minimum_tax - regular_tax_before_credits, 0)",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416404105",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: California age threshold for minimum exemption amount\n          \n          \n            \n              label: California age threshold for minimum exemption amount\n          \n          \n            \n              period: year",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416404299",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n               unit: variable\n          \n          \n            \n               unit: list\n          \n          \n            \n               period: year",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1416404391",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "38cef7a",
                                                            "authoredDate": "2023-12-05T21:52:33Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "need chnagelog",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430368261",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            class ca_total_adjustments(Variable):\n          \n          \n            \n            class ca_amti_total_adjustments(Variable):",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430369472",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                label = \"California total adjustments and preferences for AMTI calculation\"\n          \n          \n            \n                label = \"California total adjustments and preferences for the AMTI calculation\"",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430369627",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "make a amti folder in the variables and tests with all the files for the calculation",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430370416",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "make a age_threshold folder with lower.yaml and upper.yaml",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430370823",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "make a amti folder, name this file rate.yaml",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430371242",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "make an exemption folder\nfiles:\namount\nthen make a amt_threshold folder with the files:\nlower\nupper",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430372231",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "separate the statements into individual lines",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430372994",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "could you add line numbers from the form as much as possible for clarity where this calculation is coming from",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430374766",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "this file already exists, delete this and use:\npolicyengine_us/parameters/gov/states/ca/tax/income/deductions/itemized/limit/agi_threshold.yaml",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430379497",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: California Tentative Minimum Tax rate\n          \n          \n            \n              label: California tentative minimum tax rate",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430380105",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                  href: https://www.ftb.ca.gov/forms/2022/2022-540-p.pdf#page1\n          \n          \n            \n                  href: https://www.ftb.ca.gov/forms/2022/2022-540-p.pdf#page=1",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430380220",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "all yaml files",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430380331",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: California uses this rate to calculate Tentative Minimum Tax.\n          \n          \n            \n            description: California uses this rate to calculate the tentative minimum tax.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430380516",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "add sections of the legal code",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430381779",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "is this specified by the federal alternative minimum tax rate, if we can use this file instead, and deleting the CA 25% file",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430385769",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "does this refer to the Internal Revenue Code?",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430387538",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "separate the where statements out for readability",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1430392662",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bb584c9",
                                                            "authoredDate": "2023-12-17T22:20:53Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: California uses this rate to calculate Alternative minimum taxable income\n          \n          \n            \n            description: California uses this rate to calculate alternative minimum taxable income.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446678817",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: California Alternative Minimum Taxable Income Rate\n          \n          \n            \n              label: California alternative minimum taxable income rate",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446678979",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: California adds the following items to calculate the total adjustments and preferences for alternative minimum taxable income\n          \n          \n            \n            description: California adds the following items to calculate the total adjustments for the alternative minimum taxable income.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446679426",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n               label: California altenative minimum taxable income total adjustments and preferences\n          \n          \n            \n               label: California altenative minimum taxable income total adjustments",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446679580",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: California provides this exemption amount for filers.\n          \n          \n            \n            description: California provides this exemption amount.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446679725",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "is this a federal parameter? How is this mentioned in the legal code?",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446680491",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: California uses this amount as minimum exemption amount for children\n          \n          \n            \n            description: California provides this minimum exemption amount for children.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446680776",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: California minimum exemption amount for children\n          \n          \n            \n              label: California minimum children exemption amount",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446680908",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: California provides a flat exemption amount for filers having Alternative Minimum Taxable Income lower than this amount.\n          \n          \n            \n            description: California provides a flat exemption amount for filers with alternative minimum taxable income below this amount, based on filing status.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446693385",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: California lower threshold for exemption amount\n          \n          \n            \n              label: California alternative minimum tax exemption lower threshold",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446693636",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "add section of the legal code",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446701122",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: California does not provide exemption amount for filers having Alternative Minimum Taxable Income higher than this amount.\n          \n          \n            \n            description: California limits the exemption amount to filers with alternative minimum taxable income above this threshold.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446701585",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: California upper threshold for exemption amount\n          \n          \n            \n              label: California alternative minimum tax upper threshold",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446701738",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "for Line 22 \u2013 Exemption amount:\nMinimum exemption amount for certain children under age 24 $8,300.\nhttps://www.ftb.ca.gov/forms/2022/2022-540-p-instructions.html",
                                                        "author": {
                                                            "login": "LeqiGogo"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1446880668",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "for most of the parameters i can't find specific reference in this legal code: https://casetext.com/statute/california-codes/california-revenue-and-taxation-code/division-2-other-taxes/part-10-personal-income-tax/chapter-21-alternative-minimum-tax/section-17062-alternative-minimum-tax\nany other legal code i can look at?",
                                                        "author": {
                                                            "login": "LeqiGogo"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1448332202",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "720c892",
                                                            "authoredDate": "2024-01-07T00:13:58Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "not sure about this but maybe it means that if not itemized, only take ca_standard_deduction and skip line 2-5?",
                                                        "author": {
                                                            "login": "Mshuning"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1468354376",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a21463c",
                                                            "authoredDate": "2024-01-22T01:15:02Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              2021-01-01: 8_300\n          \n          \n            \n              2021-01-01: 7_850\n          \n          \n            \n              2022-01-01: 8_300",
                                                        "author": {
                                                            "login": "Mshuning"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1468355244",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a21463c",
                                                            "authoredDate": "2024-01-22T01:15:02Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            adds = [\"ca_amti_total_adjustments\", \"ca_taxable_income\", \"ca_itemized_ded_limitation\"]",
                                                        "author": {
                                                            "login": "Mshuning"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1468363495",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a21463c",
                                                            "authoredDate": "2024-01-22T01:15:02Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "not sure whether a support variable needs to be added or created",
                                                        "author": {
                                                            "login": "Mshuning"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1468363612",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a21463c",
                                                            "authoredDate": "2024-01-22T01:15:02Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "please review our code for the federal AMT. it looks like much of this derives from that. TCJA may have modified some parts of the federal AMT that california held on to, so it may be helpful to add references to the federal AMT parameters as part of this PR to determine how much can power the CA AMT computation. i suspect you can remove a fair bit of parameters and maybe logic (via branching) by referencing more federal code.",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "18 and below, not below 18",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1485727169",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd5545a",
                                                            "authoredDate": "2024-02-11T01:20:31Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "i think this is based on the internal revenue code: https://chat.openai.com/share/46cfecf8-fe9f-4520-8d59-a2a9f2c819a2\nit matches the definition of children in IRC 152(c)(3)",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1485727329",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd5545a",
                                                            "authoredDate": "2024-02-11T01:20:31Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "i don't see these mentioned here",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1485727608",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd5545a",
                                                            "authoredDate": "2024-02-11T01:20:31Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              # The legal code provides the inflation adjusted amounts\n          \n          \n            \n              # The legal code provides the amounts as of 1998, before inflation adjustments.",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1485727872",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd5545a",
                                                            "authoredDate": "2024-02-11T01:20:31Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              - title: Cal. Rev. & Tax. Code \u00a7 17062 (b) (5)\n          \n          \n            \n              - title: Cal. Rev. & Tax. Code \u00a717062(b)(5)",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1485727959",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd5545a",
                                                            "authoredDate": "2024-02-11T01:20:31Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "i don't see 8300 here",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1485728808",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd5545a",
                                                            "authoredDate": "2024-02-11T01:20:31Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "define subsection and leave a comment saying what year the legal code defines it for (same for other parameters)",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1485729429",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd5545a",
                                                            "authoredDate": "2024-02-11T01:20:31Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "more descriptive test names please",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1485729538",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd5545a",
                                                            "authoredDate": "2024-02-11T01:20:31Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "i think this is based on IRC 59(j)(1)(B)\nmore generally, only cite sources that corroborate the values",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1485733392",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd5545a",
                                                            "authoredDate": "2024-02-11T01:20:31Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I am unsure on how to read the legal code here:\nhttps://law.justia.com/codes/california/2022/code-rtc/division-2/part-10/chapter-2-1/section-17062/\nChatGPT wasnt too helpful, is this implying that the CA AMTI is a percentage of federal AMT (which would not match the amounts in the forms)",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1488733930",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd5545a",
                                                            "authoredDate": "2024-02-11T01:20:31Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "the following parameter:\npolicyengine_us/parameters/gov/states/ca/tax/income/alternative_minimum_tax/exemption/amti/threshold/upper.yaml\nis not specified in the legal code  but also does not match any of the existing parameters in the federal AMT structure, not sure if I am completely missing something here",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1488740266",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd5545a",
                                                            "authoredDate": "2024-02-11T01:20:31Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "more likely to come given the complexity but hope this helps",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "add references - this might have come from tax-calculator\nit's still in the IRS documents even though it might be nullified? e.g. https://www.irs.gov/pub/irs-drop/rp-18-57.pdf#page=15 the $7,750\nthese numbers don't quite align though",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1493120243",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    return where(exemption_eligible, total_exemption, 0)\n          \n          \n            \n                    return exemption_eligible * total_exemption",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1493133538",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "per #3909 let's change this to be more general since it also applies to eitc",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1493139058",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "might these be the phase-out end, defined mathematically from the start amount and rate?",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1493139811",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "is this separate from the existing limitations in ca_itemized_deductions?",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1493140453",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "even if they took the standard?",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1493140556",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Not sure if this captures the logic accurately but please break up the logic into steps like these throughout\n  \n    \n      \n        Suggested change\n      \n    \n    \n      \n          \n            \n                    itemized_ded_over_limitation = where(\n          \n          \n            \n                    agi_threshold = p.agi_threshold[filing_status]\n          \n          \n            \n                    limitation_applies = agi_with_itemized_deductions > agi_threshold\n          \n          \n            \n                    itemized_ded_over_limitation = limitation_applies * itemized_ded",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1493140626",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "we can make the folder amt\nalso make a subfolder amti and make this sources.yaml\nand just check the folder structure makes sense",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1493141007",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "use eitc eligibility flag instead (if matches)",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1493141999",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "this was adjusted in a separate PR and I will create a separate parameter for the CA amounts as they differ from the federal parameters",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1495186530",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "consolidated the dependent definition to be general for the IRS (as the law describes)",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1499700367",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "This seems that the limit is not applied which is usually applied for the CA itemized ded.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1499711648",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "we need to refactor the ca itemized ded. to get to the pre-limit amount",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1499713475",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "not necessary as file deleted",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1501836226",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "if changing the values\n  \n    \n      \n        Suggested change\n      \n    \n    \n      \n          \n            \n                    age_qualifies = age <= max_age\n          \n          \n            \n                    age_qualifies = age < max_age",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1501840955",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "323592b",
                                                            "authoredDate": "2024-02-25T14:40:24Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "It is mathematically derived from in main exemption calculation. However, I cant seem to derive the logic for the separate ca_amti computation in the instructions:\n\nKept the file in for now",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1501847412",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4bc0d97",
                                                            "authoredDate": "2024-02-14T00:19:16Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "parallel for the non-student one\n  \n    \n      \n        Suggested change\n      \n    \n    \n      \n          \n            \n            description: Maximum age for students to qualify as dependents under the IRC.\n          \n          \n            \n            description: The IRS permits filers to claim dependents who are full-time students if they are younger than this age at the end of the year.",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1501858815",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "854dcae",
                                                            "authoredDate": "2024-02-25T15:51:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Maximum age for students to qualify as dependents\n          \n          \n            \n              label: IRS student dependent age limit",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1501858918",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "854dcae",
                                                            "authoredDate": "2024-02-25T15:51:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    max_age = where(student, p.student, p.non_student)\n          \n          \n            \n                    ineligible_age = where(student, p.student, p.non_student)",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1501859200",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "854dcae",
                                                            "authoredDate": "2024-02-25T15:51:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "rename folder to ineligible_age",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1501859227",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "854dcae",
                                                            "authoredDate": "2024-02-25T15:51:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    return where(\n          \n          \n            \n                    separate_amti_eligible = separate & (reduced_amti > 0)\n          \n          \n            \n                    separate_amti = separate_amti_eligible * separate_amti_calc\n          \n          \n            \n                    return amti_before_ded + separate_amti",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1501859443",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "854dcae",
                                                            "authoredDate": "2024-02-25T15:51:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "could you file an issue to rename this file to be non-eitc-specific and apply its dependent rules more broadly? for instance we're not correctly capturing it to determine head of household filing status (which allows for students younger than 24)",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1501859838",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "854dcae",
                                                            "authoredDate": "2024-02-25T15:51:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    line29 = where(\n          \n          \n            \n                    line29_cap_applies = young_head & no_or_young_spouse\n          \n          \n            \n                    line29_cap = where(line29_cap_applies, adj_earnings + child_amount, np.inf)\n          \n          \n            \n                    line29_capped = min_(line29, line29_cap)",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1501860233",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "854dcae",
                                                            "authoredDate": "2024-02-25T15:51:30Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    p2 = parameters(period).gov.irs.income.amt.capital_gains\n          \n          \n            \n                    p_us = parameters(period).gov.irs.income.amt.capital_gains",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3275#discussion_r1501860286",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "854dcae",
                                                            "authoredDate": "2024-02-25T15:51:30Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        },
                        {
                            "property": "body"
                        }
                    ]
                }
            ],
            "pageInfo": {
                "endCursor": "Y3Vyc29yOjI=",
                "hasNextPage": false,
                "hasPreviousPage": false,
                "startCursor": "Y3Vyc29yOjE="
            },
            "issueCount": 2
        }
    }
}