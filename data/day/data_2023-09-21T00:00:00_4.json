{
    "data": {
        "search": {
            "edges": [
                {
                    "node": {
                        "number": 71,
                        "title": "update-game-list-viewbar",
                        "repository": {
                            "nameWithOwner": "star82620/join-joy",
                            "primaryLanguage": {
                                "name": "TypeScript"
                            }
                        },
                        "createdAt": "2023-11-16T07:49:42Z",
                        "mergedAt": "2023-11-19T13:19:55Z",
                        "url": "https://github.com/star82620/join-joy/pull/71",
                        "state": "MERGED",
                        "author": {
                            "login": "star82620"
                        },
                        "editor": null,
                        "body": "- \u8abf\u6574\u7d50\u69cb\u3001\u6a23\u5f0f",
                        "reviews": {
                            "edges": [
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "a\uff1f",
                                                        "author": {
                                                            "login": "seonkuraito"
                                                        },
                                                        "url": "https://github.com/star82620/join-joy/pull/71#discussion_r1397434230",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "24c10c9",
                                                            "authoredDate": "2023-11-16T08:30:09Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "className \u6709\u591a\u9918\u7a7a\u683c",
                                                        "author": {
                                                            "login": "seonkuraito"
                                                        },
                                                        "url": "https://github.com/star82620/join-joy/pull/71#discussion_r1397434820",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "24c10c9",
                                                            "authoredDate": "2023-11-16T08:30:09Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "\u4e0d\u8981\u5c0d\u50b3\u9032\u4f86\u7684 props \u6216 data \u91cd\u65b0\u8ce6\u503c\nFYI\uff1a\nconst data = gamesData ? gamesData : [];\n\nor\nconst data = gamesData || [];",
                                                        "author": {
                                                            "login": "seonkuraito"
                                                        },
                                                        "url": "https://github.com/star82620/join-joy/pull/71#discussion_r1397446810",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "24c10c9",
                                                            "authoredDate": "2023-11-16T08:30:09Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "isEmptyGames or isEmptyList",
                                                        "author": {
                                                            "login": "seonkuraito"
                                                        },
                                                        "url": "https://github.com/star82620/join-joy/pull/71#discussion_r1397454969",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "24c10c9",
                                                            "authoredDate": "2023-11-16T08:30:09Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "\u5df2\u4fee\u6b63",
                                                        "author": {
                                                            "login": "star82620"
                                                        },
                                                        "url": "https://github.com/star82620/join-joy/pull/71#discussion_r1398238300",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "24c10c9",
                                                            "authoredDate": "2023-11-16T08:30:09Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "isDefault \u61c9\u8a72\u5c31\u884c\u4e86",
                                                        "author": {
                                                            "login": "seonkuraito"
                                                        },
                                                        "url": "https://github.com/star82620/join-joy/pull/71#discussion_r1398334500",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "e871da3",
                                                            "authoredDate": "2023-11-19T02:09:37Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "useMemo \u4e0d\u8981\u4e82\u7528\uff0c\u4e0d\u662f\u4ec0\u9ebc\u5f88\u91cd\u7684\u904b\u7b97\u6216\u8d85\u5927\u4e00\u5305\u8cc7\u6599\uff0c\u7528\u6211\u7559\u8a00\u7684\u65b9\u5f0f\u5373\u53ef",
                                                        "author": {
                                                            "login": "seonkuraito"
                                                        },
                                                        "url": "https://github.com/star82620/join-joy/pull/71#discussion_r1398334845",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "e871da3",
                                                            "authoredDate": "2023-11-19T02:09:37Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "\u6539\u56de  const data = gamesData || [];\n\u4f46\u6709\u932f\u8aa4\u8a0a\u606f\u53ef\u4ee5\u518d\u7559\u610f\u512a\u5316\uff1a\nhttps://chat.openai.com/share/2c928a8a-d6eb-4914-ad46-0c35e75dd981",
                                                        "author": {
                                                            "login": "star82620"
                                                        },
                                                        "url": "https://github.com/star82620/join-joy/pull/71#discussion_r1398399390",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "e871da3",
                                                            "authoredDate": "2023-11-19T02:09:37Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        }
                    ]
                },
                {
                    "node": {
                        "number": 61,
                        "title": "Enhanced error handling in key functions",
                        "repository": {
                            "nameWithOwner": "OthersideAI/self-operating-computer",
                            "primaryLanguage": {
                                "name": "Python"
                            }
                        },
                        "createdAt": "2023-12-02T16:25:49Z",
                        "mergedAt": null,
                        "url": "https://github.com/OthersideAI/self-operating-computer/pull/61",
                        "state": "CLOSED",
                        "author": {
                            "login": "Prureddy"
                        },
                        "editor": null,
                        "body": "# Enhanced error handling in key functions:\r\n- Added specific exception handling to 'summarize' and 'get_next_action_from_openai' functions for improved reliability and debugging.\r\n- Introduced granular error handling for FileNotFound, Permission, Image, I/O, Base64 encoding, API request, and other potential exceptions.\r\n",
                        "reviews": {
                            "edges": [
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "Instead of adding additional lines for every exception, we can have only one line to capture all the exceptions.",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "Lines 473 - 484 are redundant as 388-412.\nWe should try to optimize this such that we should not repeat code",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Why once you print and again you return ?\nDo you do any thing on returning? Why you didn't print on function result?",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        }
                    ]
                },
                {
                    "node": {
                        "number": 364,
                        "title": "feat: improve footer",
                        "repository": {
                            "nameWithOwner": "okp4/docs",
                            "primaryLanguage": {
                                "name": "SCSS"
                            }
                        },
                        "createdAt": "2023-12-19T17:49:41Z",
                        "mergedAt": "2024-01-03T14:55:19Z",
                        "url": "https://github.com/okp4/docs/pull/364",
                        "state": "MERGED",
                        "author": {
                            "login": "MdechampG"
                        },
                        "editor": {
                            "login": "coderabbitai"
                        },
                        "body": "This PR aims at improving the footer of the website (navigation, logo, background of light theme). \r\nIt is related to the issue #353 \r\n\r\nStill to be done : center the column -> help needed. \r\n\r\n<img width=\"1437\" alt=\"Capture d\u2019e\u0301cran 2023-12-19 a\u0300 18 47 08\" src=\"https://github.com/okp4/docs/assets/92780073/bcf18438-2056-46dc-b965-ab6dac0fe055\">\r\n\r\n\r\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n## Summary by CodeRabbit\n\n- **Documentation**\n\t- Updated the footer section with new links and sections for improved navigation and resource accessibility.\n\n- **Style**\n\t- Enhanced the footer's visual appeal with a new gradient background.\n\t- Improved the layout of the footer for better alignment and readability using flexbox properties.\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->",
                        "reviews": {
                            "edges": [
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Review Status\nActionable comments generated: 1\nConfiguration used: CodeRabbit UI\n\nCommits\nFiles that changed from the base of the PR and between d37d1a2 and dc753f8.\n\n\nFiles selected for processing (3)\n\ndocusaurus.config.js (3 hunks)\nsrc/scss/custom.scss (1 hunks)\nsrc/scss/main.scss (1 hunks)\n\n\n\nFiles skipped from review due to trivial changes (2)\n\ndocusaurus.config.js\nsrc/scss/custom.scss\n\n\nAdditional comments: 2\nsrc/scss/main.scss (2)\n\n\n147-147: The use of CSS variables for styling is consistent with the rest of the file, which is good for maintainability and theming.\n\n\n145-153: The changes to the .footer class appear to be isolated and should not conflict with other styles in the file. Ensure that these changes are tested across different browsers and screen sizes to confirm that the centering works as expected.",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "The CSS properties added to the .footer class are intended to center the content horizontally and vertically. However, the comments in French (/* Cette propri\u00e9t\u00e9 aligne horizontalement */ and /* Cette propri\u00e9t\u00e9 aligne verticalement */) should be translated to English to maintain consistency in code comments, assuming the rest of the codebase uses English for comments.\n-    justify-content: center; /* Cette propri\u00e9t\u00e9 aligne horizontalement */\n-    align-items: center; /* Cette propri\u00e9t\u00e9 aligne verticalement */\n+    justify-content: center; /* This property aligns horizontally */\n+    align-items: center; /* This property aligns vertically */\n\n\n\n\nCommittable suggestion\n\n\u2757 IMPORTANT\nCarefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation.\n\n  \n    \n      \n        Suggested change\n      \n    \n    \n      \n          \n            \n                display: flex;\n          \n          \n            \n                justify-content: center; /* Cette propri\u00e9t\u00e9 aligne horizontalement */\n          \n          \n            \n                align-items: center; /* Cette propri\u00e9t\u00e9 aligne verticalement */\n          \n          \n            \n                display: flex;\n          \n          \n            \n                justify-content: center; /* This property aligns horizontally */\n          \n          \n            \n                align-items: center; /* This property aligns vertically */",
                                                        "author": {
                                                            "login": "coderabbitai"
                                                        },
                                                        "url": "https://github.com/okp4/docs/pull/364#discussion_r1431756866",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "dc753f8",
                                                            "authoredDate": "2023-12-19T17:48:06Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Device\nURL\n\n\n\n\ndesktop\nhttp://localhost:3000/\n\n\n\n    \n\n\n\nDevice\nURL\n\n\n\n\nmobile\nhttp://localhost:3000/\n\n\n\nNot what you expected? Are your scores flaky? GitHub runners could be the cause.\nTry running on Foo instead",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Good point. But I'd go further and delete the comments. They're useless in this context.",
                                                        "author": {
                                                            "login": "ccamel"
                                                        },
                                                        "url": "https://github.com/okp4/docs/pull/364#discussion_r1431853404",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "dc753f8",
                                                            "authoredDate": "2023-12-19T17:48:06Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "@ccamel: I agree, the comments explaining the CSS properties justify-content and align-items can be considered common knowledge and thus redundant. Here's the updated code snippet without the comments:\n.footer {\n  background: var(--ifm-footer-background-color-main);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\nThis should make the code cleaner and more in line with standard practices.",
                                                        "author": {
                                                            "login": "coderabbitai"
                                                        },
                                                        "url": "https://github.com/okp4/docs/pull/364#discussion_r1431854143",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "dc753f8",
                                                            "authoredDate": "2023-12-19T17:48:06Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Review Status\nActionable comments generated: 0\nConfiguration used: CodeRabbit UI\n\nCommits\nFiles that changed from the base of the PR and between d37d1a2 and 9665596.\n\n\nFiles selected for processing (3)\n\ndocusaurus.config.js (3 hunks)\nsrc/scss/custom.scss (1 hunks)\nsrc/scss/main.scss (1 hunks)\n\n\n\nFiles skipped from review due to trivial changes (3)\n\ndocusaurus.config.js\nsrc/scss/custom.scss\nsrc/scss/main.scss",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Review Status\nActionable comments generated: 0\nConfiguration used: CodeRabbit UI\n\nCommits\nFiles that changed from the base of the PR and between d37d1a2 and da7d430.\n\n\nFiles selected for processing (2)\n\ndocusaurus.config.js (3 hunks)\nsrc/scss/custom.scss (1 hunks)\n\n\n\nFiles skipped from review due to trivial changes (2)\n\ndocusaurus.config.js\nsrc/scss/custom.scss",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Review Status\nActionable comments generated: 1\nConfiguration used: CodeRabbit UI\n\nCommits\nFiles that changed from the base of the PR and between da7d430 and 1c91c79.\n\n\nFiles selected for processing (2)\n\ndocusaurus.config.js (3 hunks)\nsrc/scss/main.scss (1 hunks)\n\n\n\nFiles skipped from review due to trivial changes (1)\n\nsrc/scss/main.scss\n\n\nAdditional comments: 4\ndocusaurus.config.js (4)\n\n\n156-160: The new logo properties added to the footer object are consistent with the existing code style and correctly formatted.\n\n\n169-184: The additional link items under 'Docs' are correctly formatted and consistent with the existing structure.\n\n\n202-210: The new items added under 'Community' are correctly formatted and consistent with the existing structure.\n\n\n231-241: The new 'Tools' section is correctly formatted and follows the established pattern of the other sections in the footer object.",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "\ud83d\udca1 NOTE\nCodebase verification is a beta feature.\n\nThe verification of the URLs added to the docusaurus.config.js file has been completed. The results are as follows:\n\nhttps://okp4.network: Passed\nhttps://chat.openai.com/g/g-zUzcYmVbX-okp4-druid-oracle-beta: Failed\nhttps://t.me/okp4network: Passed\nhttps://zealy.io/c/okp4/questboard: Passed\nhttps://explore.okp4.network/OKP4%20testnet: Passed\nhttps://faucet.okp4.network: Failed\n\nBased on the output, two URLs did not pass the check. It is recommended to verify these URLs manually to ensure they are correct and accessible.\n\nThe URL https://chat.openai.com/g/g-zUzcYmVbX-okp4-druid-oracle-beta failed the check and may not be accessible.\nThe URL https://faucet.okp4.network failed the check and may not be accessible.\n\n\nAnalysis chain\n\nNote: This review was outside the patches, so it was mapped to the patch with the greatest overlap. Original lines [156-240]\n\nPlease verify that all new URLs are valid and lead to the intended destinations. This is to ensure that the footer links are functional and do not lead to broken pages.\n\n\nScripts Executed\nThe following scripts were executed for the analysis:\n\nScript:\n#!/bin/bash\n# Verify the URLs added to the footer. Expecting HTTP status 200 for all.\nurls=(\n  'https://okp4.network'\n  'https://chat.openai.com/g/g-zUzcYmVbX-okp4-druid-oracle-beta'\n  'https://t.me/okp4network'\n  'https://zealy.io/c/okp4/questboard'\n  'https://explore.okp4.network/OKP4%20testnet'\n  'https://faucet.okp4.network'\n)\n\nfor url in \"${urls[@]}\"; do\n  if ! curl --output /dev/null --silent --head --fail \"$url\"; then\n    echo \"URL check failed for $url\"\n  else\n    echo \"URL check passed for $url\"\n  fi\ndone\n\nLength of output: 1632",
                                                        "author": {
                                                            "login": "coderabbitai"
                                                        },
                                                        "url": "https://github.com/okp4/docs/pull/364#discussion_r1432368378",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "1c91c79",
                                                            "authoredDate": "2023-12-20T07:45:38Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Thanks for reporting. It's under control:\n\nhttps://chat.openai.com/g/g-zUzcYmVbX-okp4-druid-oracle-beta is accessible\nhttps://faucet.okp4.network is indeed down, but we're dealing with it.",
                                                        "author": {
                                                            "login": "ccamel"
                                                        },
                                                        "url": "https://github.com/okp4/docs/pull/364#discussion_r1432425533",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "1c91c79",
                                                            "authoredDate": "2023-12-20T07:45:38Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "@ccamel: Understood, I'm glad to hear that the URL situation is being managed. If there's anything else you need assistance with, feel free to let me know!\n\n\nIf you found this review helpful, would you consider giving us a shout-out on X?\nThank you for using CodeRabbit!",
                                                        "author": {
                                                            "login": "coderabbitai"
                                                        },
                                                        "url": "https://github.com/okp4/docs/pull/364#discussion_r1432425829",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "1c91c79",
                                                            "authoredDate": "2023-12-20T07:45:38Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Review Status\nActionable comments generated: 0\nConfiguration used: CodeRabbit UI\n\nCommits\nFiles that changed from the base of the PR and between da7d430 and ee21879.\n\n\nFiles selected for processing (2)\n\ndocusaurus.config.js (3 hunks)\nsrc/scss/main.scss (1 hunks)\n\n\n\nFiles skipped from review due to trivial changes (1)\n\nsrc/scss/main.scss\n\n\n\nFiles skipped from review as they are similar to previous changes (1)\n\ndocusaurus.config.js",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Review Status\nActionable comments generated: 0\nConfiguration used: CodeRabbit UI\n\nCommits\nFiles that changed from the base of the PR and between da7d430 and 28c9acb.\n\n\nFiles selected for processing (1)\n\ndocusaurus.config.js (3 hunks)\n\n\n\nFiles skipped from review as they are similar to previous changes (1)\n\ndocusaurus.config.js",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Review Status\nActionable comments generated: 0\nConfiguration used: CodeRabbit UI\n\nCommits\nFiles that changed from the base of the PR and between 28c9acb and c4b4d29.\n\n\nFiles selected for processing (1)\n\nsrc/scss/main.scss (1 hunks)\n\n\n\nFiles skipped from review as they are similar to previous changes (1)\n\nsrc/scss/main.scss",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Review Status\nActionable comments generated: 0\nConfiguration used: CodeRabbit UI\n\nCommits\nFiles that changed from the base of the PR and between a53f18a and 84b1f51.\n\n\nFiles selected for processing (2)\n\ndocusaurus.config.js (3 hunks)\nsrc/scss/custom.scss (1 hunks)\n\n\n\nFiles skipped from review due to trivial changes (1)\n\ndocusaurus.config.js\n\n\nAdditional comments: 1\nsrc/scss/custom.scss (1)\n\n39-40: Ensure the new gradient color values for --ifm-footer-background-color-main are consistent with the design specifications and check for potential accessibility issues, such as contrast and readability, especially for users with visual impairments.",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Review Status\nActionable comments generated: 0\nConfiguration used: CodeRabbit UI\n\nCommits\nFiles that changed from the base of the PR and between a53f18a and f1cb4dd.\n\n\nFiles selected for processing (3)\n\ndocusaurus.config.js (3 hunks)\nsrc/scss/custom.scss (1 hunks)\nsrc/scss/main.scss (1 hunks)\n\n\n\nFiles skipped from review due to trivial changes (1)\n\nsrc/scss/main.scss\n\n\n\nFiles skipped from review as they are similar to previous changes (2)\n\ndocusaurus.config.js\nsrc/scss/custom.scss",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "\ud83d\udc4d \ud83d\ude80",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        },
                        {
                            "property": "body"
                        }
                    ]
                },
                {
                    "node": {
                        "number": 563,
                        "title": "WIP - Improve docker images for faster build and deploy",
                        "repository": {
                            "nameWithOwner": "shakacode/react-webpack-rails-tutorial",
                            "primaryLanguage": {
                                "name": "Ruby"
                            }
                        },
                        "createdAt": "2023-10-29T17:24:49Z",
                        "mergedAt": null,
                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563",
                        "state": "CLOSED",
                        "author": {
                            "login": "ahangarha"
                        },
                        "editor": {
                            "login": "ahangarha"
                        },
                        "body": "Creating a base Dockerfile for this project so that it can be used in `.controlplane/Dockerfile` to speed up the build time.\r\n\r\n- This file is based on Rails 7.1 Dockerfile.\r\n- The Docker base image should be built from `Dockerfile_base` and pushed to the Docker hub.\r\n- For deploying on Control Plane, we should use `.controlplane/Dockerfile_from_base`. For this, we need to uncomment the line for the custom Dockerfile path in `.controlplane/controlplane.yml` file.\r\n\r\nThese new Dockerfiles are made originally with the idea of having a way to make a faster build/deploy process on cpln. We still need the existing Dockerfiles to have more control and flexibility when experimenting with deployment. \r\n\r\n## Result:\r\n![Screenshot from 2023-12-09 19-36-43-e](https://github.com/shakacode/react-webpack-rails-tutorial/assets/11241315/adf8c7c7-3e7f-422a-ac77-15224020386d)\r\n\r\n<!-- Reviewable:start -->\r\n- - -\r\nThis change is\u2002[<img src=\"https://reviewable.io/review_button.svg\" height=\"34\" align=\"absmiddle\" alt=\"Reviewable\"/>](https://reviewable.io/reviews/shakacode/react-webpack-rails-tutorial/563)\r\n<!-- Reviewable:end -->\r\n",
                        "reviews": {
                            "edges": [
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "Why are we adding the root docker file?\nHow does it relate to the .controlplane/Dockerfile?\n@rafaelgomesxyz @ahangarha @Judahmeek",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "@dzirtusss should this be recommended?\nSee https://chat.openai.com/share/f7e6d78b-ab5c-4e2f-808c-12c717053613",
                                                        "author": {
                                                            "login": "justin808"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1378219428",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4c83670",
                                                            "authoredDate": "2023-10-29T17:12:29Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "@ahangarha why is this duplicated in the bin script in this PR?",
                                                        "author": {
                                                            "login": "justin808"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1402861083",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4c83670",
                                                            "authoredDate": "2023-10-29T17:12:29Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Why is postgresql-client installed? I tried to find references to psql and couldn't find it.",
                                                        "author": {
                                                            "login": "borela"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1420388424",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd8580e",
                                                            "authoredDate": "2023-11-16T14:32:33Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Is it worth it having a separate build step image vs a single one where you delete the unneeded stuff afterward? You already did some cleaning on line 37.",
                                                        "author": {
                                                            "login": "borela"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1420392929",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd8580e",
                                                            "authoredDate": "2023-11-16T14:32:33Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "It comes from Rails new Dockerfile.",
                                                        "author": {
                                                            "login": "ahangarha"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1421432854",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd8580e",
                                                            "authoredDate": "2023-11-16T14:32:33Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I just followed the Dockerfile proposed by Rails.\nIt might still be faulty, but it follows the same structure.",
                                                        "author": {
                                                            "login": "ahangarha"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1421434783",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "cd8580e",
                                                            "authoredDate": "2023-11-16T14:32:33Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "The bin/docker-entrypoint file comes from new Rails setup.",
                                                        "author": {
                                                            "login": "ahangarha"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1421435873",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4c83670",
                                                            "authoredDate": "2023-10-29T17:12:29Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "WTFs:\n\npersonal name.\nneed comments on why file exists and how to use",
                                                        "author": {
                                                            "login": "justin808"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1428463885",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "6400c7a",
                                                            "authoredDate": "2023-12-10T14:22:18Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "The reason behind this was that before pushing this base image to the official docker hub of the company, I could demonstrate deployment. I needed a review on the implementation of this Docker base image. Now I got it and now I can move forward.",
                                                        "author": {
                                                            "login": "ahangarha"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1428491983",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "6400c7a",
                                                            "authoredDate": "2023-12-10T14:22:18Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "why the -e flag?",
                                                        "author": {
                                                            "login": "justin808"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1435974468",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "72712d4",
                                                            "authoredDate": "2023-12-15T22:04:53Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "This is going to confuse people.",
                                                        "author": {
                                                            "login": "justin808"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1435974877",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "72712d4",
                                                            "authoredDate": "2023-12-15T22:04:53Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I understand.\nPerhaps we can move these files into .shakacode folder which will be the place for keeping files only related to our development tasks.",
                                                        "author": {
                                                            "login": "ahangarha"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1436027937",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "72712d4",
                                                            "authoredDate": "2023-12-15T22:04:53Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I applied it based on the new Rails 7.1 Dockerfile. It is needed for the next changes to run; the == operation in the condition.\nIt is to make the whole Dockerfiles have similar content, making it easier to debug issues in the future.\nUpdate:\nActually, bash is required for the == operator.\nThe -e option is used to exit running the script immediately after a command returns with a non-zero status.",
                                                        "author": {
                                                            "login": "ahangarha"
                                                        },
                                                        "url": "https://github.com/shakacode/react-webpack-rails-tutorial/pull/563#discussion_r1436029551",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "72712d4",
                                                            "authoredDate": "2023-12-15T22:04:53Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        },
                        {
                            "property": "body"
                        }
                    ]
                },
                {
                    "node": {
                        "number": 405,
                        "title": "fix: Add cleanups in device,vlan and ports e2e tests to stabilise the CI pipeline",
                        "repository": {
                            "nameWithOwner": "equinix/metal-cli",
                            "primaryLanguage": {
                                "name": "Go"
                            }
                        },
                        "createdAt": "2023-12-11T20:48:11Z",
                        "mergedAt": "2023-12-18T19:04:38Z",
                        "url": "https://github.com/equinix/metal-cli/pull/405",
                        "state": "MERGED",
                        "author": {
                            "login": "aayushrangwala"
                        },
                        "editor": {
                            "login": "displague"
                        },
                        "body": "fixes https://github.com/equinix/metal-cli/issues/343\r\nfixes https://github.com/equinix/metal-cli/issues/387",
                        "reviews": {
                            "edges": [
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I believe that all of the occurrences of:\nt.Error(err)\nreturn\n\ncan be replaced by the following which provides additional logging context:\nt.Fatal(err)\n\nhttps://pkg.go.dev/testing#T.Fatal",
                                                        "author": {
                                                            "login": "displague"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1425608248",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "578a0a5",
                                                            "authoredDate": "2023-12-13T13:19:15Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "A few more points are discussed here, https://chat.openai.com/share/4d97fa93-08b7-4e4d-8a7c-2343394a6ffe\n\nwe could handle the Close() and remapping of Stdout in a defer call so that it happens in error conditions\nthere are potential error conditions that are not being checked by the tests",
                                                        "author": {
                                                            "login": "displague"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1425616429",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "578a0a5",
                                                            "authoredDate": "2023-12-13T13:19:15Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Let's use the existing GenerateRandomString function (defined above) rather than adding a second function to serve the same purpose.",
                                                        "author": {
                                                            "login": "ctreatma"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1425690277",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "578a0a5",
                                                            "authoredDate": "2023-12-13T13:19:15Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "The random string should be generated once at the start of a test, and the same value should be used in all resource names for the test (so the test project and the test devices in that project should have the same random string in their names).",
                                                        "author": {
                                                            "login": "ctreatma"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1425692400",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "578a0a5",
                                                            "authoredDate": "2023-12-13T13:19:15Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "The project name prefix here should be passed in, not hard-coded to metal-cli-test-project; I see a couple orphaned projects from these tests, but I can't tell which tests they came from because of the generic prefix.",
                                                        "author": {
                                                            "login": "ctreatma"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1425696908",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "578a0a5",
                                                            "authoredDate": "2023-12-13T13:19:15Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "@aayushrangwala good call using t.Cleanup instead of defer. \ud83d\udc4d",
                                                        "author": {
                                                            "login": "displague"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1426728877",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "578a0a5",
                                                            "authoredDate": "2023-12-13T13:19:15Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Ah right didnt notice as it recently got merged I guess",
                                                        "author": {
                                                            "login": "aayushrangwala"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1427393975",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "578a0a5",
                                                            "authoredDate": "2023-12-13T13:19:15Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Done",
                                                        "author": {
                                                            "login": "aayushrangwala"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1427877700",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "578a0a5",
                                                            "authoredDate": "2023-12-13T13:19:15Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Right. Fixed",
                                                        "author": {
                                                            "login": "aayushrangwala"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1427879480",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "578a0a5",
                                                            "authoredDate": "2023-12-13T13:19:15Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Yes right. Fixed",
                                                        "author": {
                                                            "login": "aayushrangwala"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1427886518",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "578a0a5",
                                                            "authoredDate": "2023-12-13T13:19:15Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "The signature and implementation of this function shouldn't change; it should be used as-is.",
                                                        "author": {
                                                            "login": "ctreatma"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1430368927",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "8919638",
                                                            "authoredDate": "2023-12-15T11:48:12Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "panic: runtime error: slice bounds out of range [:5] with length 4\nThe base64 encoding produces less characters as is unnecessary for this task. Here's a simplified approach that doesn't panic:\nfunc GenerateRandomString(length int) string {\n\tcharSet := \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"\n\trand.Seed(time.Now().UnixNano()) // seeding could happen outside of this function, in the test runner construction / init\n\tresult := make([]byte, length)\n\tfor i := range result {\n\t\tresult[i] = charSet[rand.Intn(len(charSet))]\n\t}\n\treturn string(result)\n}",
                                                        "author": {
                                                            "login": "displague"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1430375492",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "8919638",
                                                            "authoredDate": "2023-12-15T11:48:12Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "The problem with the original function was that it would error out on smaller sized lengths - 5 for example. Somewhere in the history of this PR the random string length was modified from 32 to 5 and the E2E tests started failing.  We have seen more restrictive resource lengths introduced in the EM API, specifically around tags. I don't know if that was a motivation for the initial change.\nOnce the E2E tests started failing, I took a look at what would be needed to fix the base64-based GenerateRandomString function. The complexity hid the problem. As rewritten, the function can not fall into an error condition so the signature was modified to remove the unused error.  If we are ok with accepting that change in this PR, we'll see the echo of that change in this PR.\nhttps://go.dev/play/p/Z2zkdK5lSEU",
                                                        "author": {
                                                            "login": "displague"
                                                        },
                                                        "url": "https://github.com/equinix/metal-cli/pull/405#discussion_r1430516772",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "8919638",
                                                            "authoredDate": "2023-12-15T11:48:12Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "approving contingent on tests (which seem to be stuck)",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        },
                        {
                            "property": "body"
                        }
                    ]
                },
                {
                    "node": {
                        "number": 3258,
                        "title": "Montana Elderly Residential Property Tax Credit (Renter/Homeowner)",
                        "repository": {
                            "nameWithOwner": "PolicyEngine/policyengine-us",
                            "primaryLanguage": {
                                "name": "Python"
                            }
                        },
                        "createdAt": "2023-11-09T23:12:00Z",
                        "mergedAt": "2024-01-06T13:51:11Z",
                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258",
                        "state": "MERGED",
                        "author": {
                            "login": "Jingj-WANG"
                        },
                        "editor": null,
                        "body": "Fixed: #2579\n\n<!--\ncopilot:all\n-->\n### <samp>\ud83e\udd16 Generated by Copilot at f3cb5b5</samp>\n\n### Summary\n:sparkles::page_facing_up::test_tube:\n\n<!--\n1.  :sparkles: This emoji represents the addition of a new feature or enhancement, which is the main purpose of the pull request. The Montana elderly homeowner/renter credit is a new feature that adds functionality and value to the policy engine.\n2. :page_facing_up: This emoji represents the addition of new documentation or data, which is a significant part of the pull request. The changelog entry, the parameter files, and the test files are all examples of documentation or data that help explain and support the new feature.\n3. :test_tube: This emoji represents the addition of new tests or refactoring of existing tests, which is another important part of the pull request. The test files are examples of tests that ensure the quality and reliability of the new feature and the policy engine.\n-->\nThis pull request adds the Montana elderly homeowner/renter credit to the policy engine. It creates new parameter, variable, and test files for the credit computation and eligibility logic, based on the Montana tax code and forms. It also updates the changelog file to document the new feature and the required version bump.\n\n> _`Montana_credit`_\n> _New feature for the engine_\n> _Autumn of one's life_\n\n### Walkthrough\n*  Add the Montana elderly homeowner/renter credit to the policy engine ([link](https://github.com/PolicyEngine/policyengine-us/pull/3258/files?diff=unified&w=0#diff-5885042762833a4aef51405a4036067e4e6aefa7a5091a2987d1d9d1fc2647e8R1-R4), [link](https://github.com/PolicyEngine/policyengine-us/pull/3258/files?diff=unified&w=0#diff-14e9ce3a91a1d3d6a4ec058c47b82050ae6dd00381c0bd6ec683da4bafdcd62bR1-R37), [link](https://github.com/PolicyEngine/policyengine-us/pull/3258/files?diff=unified&w=0#diff-2c9810939c2135dc8c1bb528d96dd398a64f6166307fa8b114a46b6f01a26806R1-R21), [link](https://github.com/PolicyEngine/policyengine-us/pull/3258/files?diff=unified&w=0#diff-b45eda50fbbf6c9ac1aa9ced8d8ad36aa93a4d0bac5a66b1ca0390a04ef26d78L1-R13))\n\n\n",
                        "reviews": {
                            "edges": [
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                age_spuse: 64\n          \n          \n            \n                age_spouse: 64\n          \n          \n            \n                # and others",
                                                        "author": {
                                                            "login": "hua7450"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1409883049",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "769bedc",
                                                            "authoredDate": "2023-11-10T00:17:30Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                - tax_exempt_pension_income\n          \n          \n            \n                - pension_income",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1411455304",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "073d47e",
                                                            "authoredDate": "2023-12-01T00:12:57Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "IRA:\nregular_ira_distributions\nroth_ira_distributions",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1411456450",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "073d47e",
                                                            "authoredDate": "2023-12-01T00:12:57Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                subtracts = [\"tax_exempt_social_security\"]\n          \n          \n            \n                # Tax form specifies total social social security - the taxable social security amounts\n          \n          \n            \n                subtracts = [\"tax_exempt_social_security\"]",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1411460752",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "073d47e",
                                                            "authoredDate": "2023-12-01T00:12:57Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "check whether for all or just head and spouse",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1411462679",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "073d47e",
                                                            "authoredDate": "2023-12-01T00:12:57Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "for all members in the household either related or not\nimage.png",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418036402",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "073d47e",
                                                            "authoredDate": "2023-12-01T00:12:57Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418036624",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "073d47e",
                                                            "authoredDate": "2023-12-01T00:12:57Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana multiplies the credit by this multiplier for the calculation of the final elderly homeowner or renter credit.\n          \n          \n            \n            description: Montana multiplies the final elderly homeowner or renter credit amount by this multiplier.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418876861",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "rename to multiplier.yaml",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418877054",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana provides this elderly homeowner or renter credit for filers at or above this age.\n          \n          \n            \n            description: Montana provides the elderly homeowner or renter credit for filers at or above this age.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418877404",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Montana elderly homeowner or renter credit minimum age threshold\n          \n          \n            \n              label: Montana elderly homeowner or renter credit age threshold",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418877608",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              unit: list\n          \n          \n            \n              unit: list\n          \n          \n            \n              period: year",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418877993",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "need a legal code reference",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418878212",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "rename to cap",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418878689",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana provides this maximum amount for the elderly homeowner or renter credit before credit multiplier.\n          \n          \n            \n            description: Montana caps the pre-multiplier amount of the elderly homeowner or renter credit to this amount.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418879166",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Montana elderly homeowner or renter credit max amount before credit multiplier\n          \n          \n            \n              label: Montana elderly homeowner or renter credit pre multiplier cap",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418879442",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "rename to phase_out_rate.yaml",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418880033",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              amount_unit: /1\n          \n          \n            \n              amount_unit: /1\n          \n          \n            \n              period: year",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418880238",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana uses this reduction amount for the computation based of the elderly homeowner or renter credit.\n          \n          \n            \n            description: Montana phases the net household income out at this rate under the elderly homeowner or renter credit.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418880815",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Montana household income reduction amount\n          \n          \n            \n              label: Montana elderly or homeowner credit household income reduction amount",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418881029",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "rename to standard_exclusion_amount.yaml",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418882433",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana allows for this standard exclusion for the computation of the elderly homeowner or renter credit.\n          \n          \n            \n            description: Montana allows for this standard exclusion amount of net household income under the elderly homeowner or renter credit.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418882680",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Montana elderly homeowner or renter credit standard exclusion\n          \n          \n            \n              label: Montana elderly homeowner or renter credit net household income standard exclusion amount",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418883089",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "right?",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418883354",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "right?",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418883548",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana uses this rate in computation of the rent equivalent tax paid.\n          \n          \n            \n            description: Montana multiplies the rent by this rate for the computation of the rent equivalent tax paid.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418884376",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "should this be a montana general parameter? (Would we use this rate for other programs)",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418885021",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              unit: list\n          \n          \n            \n              unit: list\n          \n          \n            \n              period: year",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418885224",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "add a comment why we do this",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418886860",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Other way around\nWe take all credits here and then add the renter credit, not subtract it\nadjust the mt_refundable_credits to add this and the renter credit (adds function)",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1418889083",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Net household income = Max_((Gross household income - standard exclusion), 0) * rate. I think it's correct",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1419178874",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1419191449",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "https://law.justia.com/codes/montana/2022/title-15/chapter-30/part-23/section-15-30-2337/",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1419191836",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I think it's only for Montana. I check federal law and there's no definition for that. https://www.irs.gov/businesses/small-businesses-self-employed/tips-on-rental-real-estate-income-deductions-and-recordkeeping",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1419196545",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4a8e023",
                                                            "authoredDate": "2023-12-06T23:41:08Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                label = \"Montana Elderly Homeowner/Renter Credit Eligibility\"\n          \n          \n            \n                label = \"Eligible for the Montana Elderly Homeowner/Renter Credit\"",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1419790375",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "622757d",
                                                            "authoredDate": "2023-12-07T23:00:49Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                - title: Montana 2022 Form2 Individual Income Tax Instructions, Page48, Line 7 # Montana Elderly Homeowner or renter credit\n          \n          \n            \n                - title: Montana 2022 Form2 Individual Income Tax Instructions",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1419793041",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "308bee0",
                                                            "authoredDate": "2023-12-08T00:08:44Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                  href: https://mtrevenue.gov/wp-content/uploads/dlm_uploads/2022/12/Form-2-2022-Instructions.pdf#page=48\n          \n          \n            \n                  href: https://mtrevenue.gov/wp-content/uploads/dlm_uploads/2022/12/Form-2-2022-Instructions.pdf#page=17",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1419793190",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "308bee0",
                                                            "authoredDate": "2023-12-08T00:08:44Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              2009-01-01:\n          \n          \n            \n              2021-01-01:",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1419793299",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "308bee0",
                                                            "authoredDate": "2023-12-08T00:08:44Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "create a new mt_elderly_homeowner_or_renter_credit_net_household_income variable with the computation:",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1419795201",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "308bee0",
                                                            "authoredDate": "2023-12-08T00:08:44Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "logic is great!",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1419795459",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "308bee0",
                                                            "authoredDate": "2023-12-08T00:08:44Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Montana elderly or homeowner credit household income reduction amount\n          \n          \n            \n              label: Montana elderly or homeowner credit household income phase out rate",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1419795767",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "308bee0",
                                                            "authoredDate": "2023-12-08T00:08:44Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "This passed in your test but wouldn't in other tests, due to very weird Python internals that I didn't know of: https://chat.openai.com/share/46ad69dc-4ce7-4572-88e7-d60dc69f6715\n  \n    \n      \n        Suggested change\n      \n    \n    \n      \n          \n            \n                    age_eligible = age_head | age_spouse >= p.age_threshold\n          \n          \n            \n                    age_eligible = (age_head >= p.age_threshold) | (age_spouse >= p.age_threshold)\n          \n      \n    \n    \n  \n\nAlternatively, implement #3148",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421599212",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "For extra clarity\n  \n    \n      \n        Suggested change\n      \n    \n    \n      \n          \n            \n                    return age_eligible & (gross_household_income < p.income_limit)\n          \n          \n            \n                    income_eligible = gross_household_income < p.income_limit\n          \n          \n            \n                    return age_eligible & income_eligible",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421599479",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "where's this from? subsection 7 says $1,000 on contingency for 2022-25, but the tax forms indicate that those contigency requirements were not met, so it's just $1,150 since 2021. please update and leave a comment about this\nhttps://chat.openai.com/share/3cf6ad03-3174-4f09-9ed7-a3a1afce7a27\nSimilarly fix this with the standard exclusion",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421605401",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "remove credit from the folder since it's in credits/",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421605442",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Montana elderly homeowner or renter credit pre multiplier cap \n          \n          \n            \n              # The legal code is ambiguous about whether the cap applies before or after\n          \n          \n            \n              # the multiplier, but the tax form indicates it applies before.\n          \n          \n            \n              label: Montana elderly homeowner or renter credit pre multiplier cap",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421605577",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana qualifies filers for the elderly homeowner or renter credit with gross household income below this amount.\n          \n          \n            \n            description: Montana limits its elderly homeowner or renter credit to filers with gross household income below this amount.",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421605598",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Montana elderly homeowner or renter credit gross household income limit\n          \n          \n            \n              label: Montana elderly homeowner or renter credit income limit",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421605622",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Monatna elderly homeowner or renter credit gross income sources\n          \n          \n            \n              label: Montana elderly homeowner or renter credit gross income sources",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421605654",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                  2009-01-01: 42_000\n          \n          \n            \n                  2009-01-01: 45_000",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421605822",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "remove _amount",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421606037",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana allows for this standard exclusion amount of net household income under the elderly homeowner or renter credit.\n          \n          \n            \n            description: Montana excludes this amount when computing net household income for the elderly homeowner or renter credit.",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421606067",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Montana elderly homeowner or renter credit net household income standard exclusion amount\n          \n          \n            \n              label: Montana elderly homeowner or renter credit net household income standard exclusion",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421606084",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana multiplies the rent by this rate for the computation of the rent equivalent tax paid.\n          \n          \n            \n            description: Montana counts this fraction of rent as property tax for its elderly homeowner or renter credit.",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421606130",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Montana rent equivalent tax rate\n          \n          \n            \n              label: Montana elderly homeowner or renter credit rent equivalent rate",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421606151",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "reduction_rate",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421606276",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              label: Montana elderly or homeowner credit household income phase out rate\n          \n          \n            \n              label: Montana elderly or homeowner credit household income reduction rate",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421606304",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana phases the net household income out at this rate under the elderly homeowner or renter credit.\n          \n          \n            \n            description: Montana reduces net household income by this fraction under the elderly homeowner or renter credit, depending on income.",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421606383",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    credit_amount = max_(\n          \n          \n            \n                    countable_rent = rent * p.rent_equivalent_rate\n          \n          \n            \n                    countable_rent_property_tax = property_tax + countable_rent\n          \n          \n            \n                    uncapped_credit = max_(countable_rent_property_tax - net_household_income, 0)\n          \n          \n            \n                    capped_credit = min_(uncapped_credit, p.cap)\n          \n          \n            \n                    multiplier = p.multiplier.calc(gross_household_income)\n          \n          \n            \n                    return capped_credit * multiplier",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421606811",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    return (\n          \n          \n            \n                    reduction_rate = p.net_household_income.reduction_rate.calc(\n          \n          \n            \n                            reduced_household_income\n          \n          \n            \n                        )\n          \n          \n            \n                    return reduced_household_income * reduction_rate",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421606861",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "space others similarly\n  \n    \n      \n        Suggested change\n      \n    \n    \n      \n          \n            \n                - tax_exempt_interest   # Line2: exempt interest\n          \n          \n            \n                - tax_exempt_interest # Line 2: exempt interest",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421608268",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            class mt_gross_household_income(Variable):\n          \n          \n            \n            class mt_elderly_homeowner_or_renter_credit_gross_household_income(Variable):",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421608520",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "delete this through 15. it's correctly added to gross_income_sources as to capture total SS benefits: taxable via AGI, plus tax-exempt",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1421608592",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Here are the legislative changes in the Montana 2022 tax form: (increased elderly homeowner/renter credit)\nhttps://mtrevenue.gov/wp-content/uploads/dlm_uploads/2022/12/Form-2-2022-Instructions.pdf#page=5\n\nHere's what it says in 2021 tax instructions:\nhttps://mtrevenue.gov/wp-content/uploads/mdocs/form%202%202021%20instructions.pdf#page=5",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1425983255",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "@MaxGhenis\nThis credit is in FORM 2EC before year 2018 and was combined in FORM 2 in 2018\n\nI double-checked the tax form and instructions each year:\nhttps://mtrevenue.gov/publications/montana-individual-income-tax-return-form-2/\nhttps://mtrevenue.gov/publications/montana-form-2-individual-income-tax-return-forms-and-instructions-includes-form-2ec/\nHere's a 2EC evaluation file, talking about how cap_value changes:\nhttps://leg.mt.gov/content/Committees/Interim/2019-2020/Revenue/Meetings/July-2020/Tax-Credit-Review/2EC-evaluation.pdf#page=10\n\nIn tax form\n\nin 2022: cap = 1150\nin 2018-2021: cap = 1000\nbefore 2018, it shows in 2EC FORM and cap=1000, LINE11 (2017)\nhttps://www.taxformfinder.org/forms/2019/2019-montana-form-2ec.pdf#page=1\n\nI didn't see the $900 and $950 in any tax forms and doubt what GPT answered",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1426001499",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "thanks should you change line 4 to 2022 then?",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1426023703",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "yes, I am revising that now.",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1426024484",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "d906fcd",
                                                            "authoredDate": "2023-12-08T01:19:54Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "rename to standard_exclusion.yaml",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1432035642",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "6c73c88",
                                                            "authoredDate": "2023-12-15T18:58:27Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "And elsewhere\n  \n    \n      \n        Suggested change\n      \n    \n    \n      \n          \n            \n                mt_elderly_homeowner_or_renter_credit_net_household_income: 1070\n          \n          \n            \n                mt_elderly_homeowner_or_renter_credit_net_household_income: 1_070",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1428385262",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "6c73c88",
                                                            "authoredDate": "2023-12-15T18:58:27Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "delete this - redundant with multiplier",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434376546",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "ef8020a",
                                                            "authoredDate": "2023-12-20T16:28:46Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana provides the elderly homeowner or renter credit for filers at or above this age.\n          \n          \n            \n            description: Montana limits the elderly homeowner or renter credit to filers this age or older.",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434376790",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "ef8020a",
                                                            "authoredDate": "2023-12-20T16:28:46Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "use older_age_head_spouse (might not be the exact variable name) to simplify this, i.e. return older_age_head_spouse >= p.age_threshold",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434509014",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "b5f938b",
                                                            "authoredDate": "2023-12-21T20:29:56Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "is this correct? Or do you want me to create a new variable older_age_head_spouse?",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434512956",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "b5f938b",
                                                            "authoredDate": "2023-12-21T20:29:56Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "@MaxGhenis",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434513541",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "b5f938b",
                                                            "authoredDate": "2023-12-21T20:29:56Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "there's already a variable in the system",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434541752",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "b5f938b",
                                                            "authoredDate": "2023-12-21T20:29:56Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "got it.",
                                                        "author": {
                                                            "login": "Jingj-WANG"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434549253",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "b5f938b",
                                                            "authoredDate": "2023-12-21T20:29:56Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    age_spouse = tax_unit(\"age_spouse\", period)",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434588767",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bfdbb3c",
                                                            "authoredDate": "2023-12-21T22:06:12Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    age_head = tax_unit(\"age_head\", period)",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434588792",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bfdbb3c",
                                                            "authoredDate": "2023-12-21T22:06:12Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    countable_rent_property_tax = property_tax + countable_rent\n          \n          \n            \n                    countable_rent_and_property_tax = property_tax + countable_rent",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434588889",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bfdbb3c",
                                                            "authoredDate": "2023-12-21T22:06:12Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                - mt_ctc\n          \n          \n            \n                - mt_ctc\n          \n          \n            \n                - mt_eitc",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434589030",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bfdbb3c",
                                                            "authoredDate": "2023-12-21T22:06:12Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana excludes this amount when computing net household income for elderly homeowner or renter credit.\n          \n          \n            \n            description: Montana excludes this amount of net household income when computing net household income for elderly homeowner or renter credit.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434589245",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bfdbb3c",
                                                            "authoredDate": "2023-12-21T22:06:12Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana reduces net household income by this fraction under the elderly homeowner or renter credit, depending on income.\n          \n          \n            \n            description: Montana reduces net household income by this fraction under the elderly homeowner or renter credit, depending on gross household income reduced by the standard exclusion.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434589555",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bfdbb3c",
                                                            "authoredDate": "2023-12-21T22:06:12Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana multiplies the final elderly homeowner or renter credit amount by this multiplier.\n          \n          \n            \n            description: Montana multiplies the elderly homeowner or renter credit computation amount by this multiplier.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434589666",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bfdbb3c",
                                                            "authoredDate": "2023-12-21T22:06:12Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            # due to circle reference\n          \n          \n            \n            # due to a potential circular reference",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434589790",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "bfdbb3c",
                                                            "authoredDate": "2023-12-21T22:06:12Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "CHANGES_REQUESTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana gross income sources for the calculation of elderly homeowner or renter credit.\n          \n          \n            \n            description: Montana gross income sources for the calculation of the elderly homeowner or renter credit.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434599493",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4892fa9",
                                                            "authoredDate": "2023-12-21T23:48:35Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n            description: Montana multiplies the elderly homeowner or renter credit computation amount by this multiplier.\n          \n          \n            \n            description: Montana multiplies the capped elderly homeowner or renter credit amount by this multiplier.",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434599821",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4892fa9",
                                                            "authoredDate": "2023-12-21T23:48:35Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                # In the gross income sources, we include the elderly homeowner or renter credit in refundable credits\n          \n          \n            \n                # Under the gross income sources computation, the elderly homeowner or renter credit \n          \n          \n            \n                # is included in the list of refundable credits",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434600526",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4892fa9",
                                                            "authoredDate": "2023-12-21T23:48:35Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                # So we created another variable mt_refundable_credits_before_renter_credit.py\n          \n          \n            \n                # mt_refundable_credits_before_renter_credit was created to circumvent this",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434600646",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4892fa9",
                                                            "authoredDate": "2023-12-21T23:48:35Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                label = \"Montana refundable credits before adding elderly homeowner or renter credit\"\n          \n          \n            \n                label = \"Montana refundable credits before adding the elderly homeowner or renter credit\"",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434600705",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4892fa9",
                                                            "authoredDate": "2023-12-21T23:48:35Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                # In gross income sources, we include the elderly homeowner or renter credit in refundable credits\n          \n          \n            \n                # Under the gross income sources computation, the elderly homeowner or renter credit \n          \n          \n            \n                # is included in the list of refundable credits```",
                                                        "author": {
                                                            "login": "PavelMakarchuk"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1434600811",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "4892fa9",
                                                            "authoredDate": "2023-12-21T23:48:35Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                label = \"Montana Net Household Income\"\n          \n          \n            \n                label = \"Net household income for Montana elderly homeowner or renter credit\"",
                                                        "author": {
                                                            "login": "MaxGhenis"
                                                        },
                                                        "url": "https://github.com/PolicyEngine/policyengine-us/pull/3258#discussion_r1443322935",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "039aa0c",
                                                            "authoredDate": "2023-12-22T00:15:37Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        },
                        {
                            "property": "body"
                        }
                    ]
                },
                {
                    "node": {
                        "number": 1295,
                        "title": "Fix broken hausdorff test",
                        "repository": {
                            "nameWithOwner": "rapidsai/cuspatial",
                            "primaryLanguage": {
                                "name": "Jupyter Notebook"
                            }
                        },
                        "createdAt": "2023-11-15T02:23:08Z",
                        "mergedAt": "2023-11-16T15:21:25Z",
                        "url": "https://github.com/rapidsai/cuspatial/pull/1295",
                        "state": "MERGED",
                        "author": {
                            "login": "isVoid"
                        },
                        "editor": null,
                        "body": "This PR revises the gold result of hausdorff empty input test to address\nan upstream change in cudf.\n\n## Description\n<!-- Provide a standalone description of changes in this PR. -->\n<!-- Reference any issues closed by this PR with \"closes #1234\". -->\n<!-- Note: The pull request title will be included in the CHANGELOG. -->\n\n## Checklist\n- [x] I am familiar with the [Contributing Guidelines](https://github.com/rapidsai/cuspatial/blob/HEAD/CONTRIBUTING.md).\n- [x] New or existing tests cover these changes.\n- [x] The documentation is up to date with these changes.\n",
                        "reviews": {
                            "edges": [
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "Fix seems fine to me, although I wonder if maybe it should be changed the other way in the long term i.e. have cuspatial return an empty RangeIndex rather than force cudf to produce an empty Index.",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        },
                        {
                            "property": "body"
                        }
                    ]
                },
                {
                    "node": {
                        "number": 145,
                        "title": "New banner with cards are added to all pages",
                        "repository": {
                            "nameWithOwner": "rohan9024/ecommerce",
                            "primaryLanguage": {
                                "name": "JavaScript"
                            }
                        },
                        "createdAt": "2023-12-14T11:26:27Z",
                        "mergedAt": "2023-12-19T19:32:49Z",
                        "url": "https://github.com/rohan9024/ecommerce/pull/145",
                        "state": "MERGED",
                        "author": {
                            "login": "Sami3160"
                        },
                        "editor": {
                            "login": "Sami3160"
                        },
                        "body": "issue #133 resolved\r\n\r\n-Cards like banners are added on every page, like men, women kids, shoes, sales.\r\n-Banner from all pages are responsive.\r\n-For more 'pluggable look' library is used.\r\n-All Images are good high quality\r\n-5-6 different cards are added as banner with effects and slide animation \r\n-Title and description is meant to be meaningful with images and nav link.\r\n-Every page, every card have unique image, title, description with well relatable meaning...\r\n-On every page changes cards are added, yet code is also kept optimized, with no redundancy.\r\n-Cards can be changed by mouse, or by clicking on a card then using keyboard buttons (to use keyboard focus on card i required)\r\nhere is screenshot of banner cards:\r\n![Screenshot (114)](https://github.com/rohan9024/ecommerce/assets/110652247/597d52d2-ad7d-4654-84e0-89157ef5758b)\r\n-page of shoes section\r\n![Screenshot (115)](https://github.com/rohan9024/ecommerce/assets/110652247/c61fd1b3-99d3-482c-ac77-e65d10e0d3ff)\r\n-responsive testing\r\n![Screenshot (116)](https://github.com/rohan9024/ecommerce/assets/110652247/3dd29278-93a9-44d0-87d5-41454acfc616)\r\n![Screenshot (117)](https://github.com/rohan9024/ecommerce/assets/110652247/d53b18bc-d67b-4eba-a25f-35667e7f462a)\r\n-Can change the the cards as slides by both mouse and keyboard \r\n![Screenshot (118)](https://github.com/rohan9024/ecommerce/assets/110652247/80032e13-e856-43f1-8436-9f217ab20a4d)\r\n\r\n\r\nplease do check my pr, it was soo hard as react newbie \ud83d\ude05but it was so fun also\ud83d\ude01",
                        "reviews": {
                            "edges": []
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        },
                        {
                            "property": "body"
                        }
                    ]
                },
                {
                    "node": {
                        "number": 50,
                        "title": "feat: neuron rotation",
                        "repository": {
                            "nameWithOwner": "s1dlx/meh",
                            "primaryLanguage": {
                                "name": "Python"
                            }
                        },
                        "createdAt": "2023-11-10T04:19:20Z",
                        "mergedAt": null,
                        "url": "https://github.com/s1dlx/meh/pull/50",
                        "state": "OPEN",
                        "author": {
                            "login": "ljleb"
                        },
                        "editor": {
                            "login": "ljleb"
                        },
                        "body": "For each key:\r\n1. extract an orthogonal matrix, model $A$ is the base and model $B$ is the target orientation\r\n2. apply the orthogonal transform immediately\r\n\r\nNote: this is pretty slow. On my RTX 3080 it takes me ~3 minutes to merge two models.",
                        "reviews": {
                            "edges": [
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": []
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "This is actually a lot more complex than meets the eye. We should be determining the svd driver based on the size of the matrix. Different drivers perform faster on smaller/bigger matrices. And in some instances the CPU will out perform the GPU. What exactly is our average matrix size when we call svd?",
                                                        "author": {
                                                            "login": "mariaWitch"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419652579",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "If we include all keys, it goes form $320^2$ to ~ $20K^2$. As this upper bound isn't really practical, if we exclude all conv layers (which have the largest neurons), the upper bound is ~ $5K^2$. I can list all sizes in a bit, they all are square matrices.\nI've never done this before at all, this is all new to me. Appreciate the help. IIUC, this only matters on cuda devices?",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419713533",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "all matrices sizes that currently go through svd are listed below:\n\n320x320: 47 keys\n640x640: 48 keys\n768x768: 94 keys\n960x960: 2 keys\n1280x1280: 83 keys\n2560x2560: 10 keys\n3072x3072: 12 keys\n5120x5120: 6 keys",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419746439",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I did some benchmarking between jax's svd functions jitted through XLA and pytorch's different drivers on a colab using a v100 (a 3080 is about equal to this in PyTorch Performance), and these were the results.\n\nBasically unless you need full accuracy, even with full_matrices set to true, gesvdj is going to be faster. However the speed you gain comes at the cost of some accuracy, and the potential to not always converge without needing to fall back to gesvd.",
                                                        "author": {
                                                            "login": "mariaWitch"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419802419",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I tested gesvdj with fractional alpha a while ago and the error builds up pretty quickly. IIRC it works okay in the non fractional cases (alpha = 0 or alpha = 1). I'll run some tests again to verify this and make sure this was the cause.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419804656",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "It appears that I can't practically merge models using gesvdj, on my 3080 it takes 1m10s to merge a single 3072x3072 key. The full merge might take more than a hour. Maybe the proper merge driver to use is hardware dependent?\nstage 1:  11%|\u2588         | 121/1133 [08:28<22:51,  1.36s/it]\nshape: torch.Size([3072, 3072])\nstage 1:  11%|\u2588         | 125/1133 [09:38<1:46:57,  6.37s/it]",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419812072",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I'll make sure to try it here in a bit on my system.",
                                                        "author": {
                                                            "login": "mariaWitch"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419834913",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Apart from taking 57 minutes to merge gesvdj on a RTX 3080, there doesn't seem to be any quality difference between merging using gesvd and gesvdj with alpha=1.0 and beta=0.0:\n\nUnless of course I did not switch the driver correctly. All I did was use the string \"gesvdj\" instead of \"gesvd\". All merges were made using --driver cuda",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419871893",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Yeah, something seems wrong on your end, are you sure that PyTorch is seeing your GPU?",
                                                        "author": {
                                                            "login": "mariaWitch"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419872612",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Yes my device is setup correctly and I can see that it uses cuda:0 during the merge. I don't have any other cuda hardware on my system.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419875731",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I'll try updating pytorch to 2.1.x and see if that fixes it. Currently my version is 2.0.1 compiled with cuda support.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419880035",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Updating did not increase merge speed with gesvdj.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419884319",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "How long does it take on your end to merge the same set of models with gesvd and then with gesvdj? I understand that the benchmarks above indicate that gesvdj should be faster, but I wonder if we should run benchmarks against the particular type of data we would see with model merging in case gesvdj runs faster or slower depending on what the value of the input is.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419910898",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I'm getting 1.3 sec/it to 1.8it/sec with gesvd.  gesvdj does seem slower. My guess is that our matrices aren't converging. Now, do we need the full matrix from svd? Setting that to false would help speed things up as well.",
                                                        "author": {
                                                            "login": "mariaWitch"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419952364",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Does the full_matrices parameter even have an effect when the input matrix is square? But even if it has an effect, I believe we do. Basically, what we're doing here is solving the procrustes problem where the points are the neurons from A and B. We need $U$ and $V^T$ to be (square) unitary matrices. If computing reduced matrices shrinks $U$ and $V$ in width, I'm not sure the resulting $UV^T$ would necessarily be unitary.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419959499",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Hm, according to the docs, it seems that the columns of $U$ and $V$ should be orthonormal with full_matrices=False. IIUC, $UV^T$ should then be a orthogonal matrix. Experimentally, that seems to be the case. I'll test if there's any quality loss/drawback to this and how much quicker it is.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419962737",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "There is no apparent quality loss, so I'll commit full_matrices=False.\nleft image is full_matrices=False, right image is full_matrices=True",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419964640",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Actually I don't see a major speedup with full_matrices=False. I'll try to remove neuron dimensions that are more similar. One idea I had was to lower the similarity threshold during the comparison so that the values in a dimension closer to 0 are discarded before applying SVD.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1419978192",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "If we have a lot of similar matrices, it might be worth it to try jax instead of pytorch and use the XLA accelerated svd functions there. From what I understanding, the caching will make repeated runs of similar data faster.",
                                                        "author": {
                                                            "login": "mariaWitch"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1420395357",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I just did a speed test on CPU and the performance is significantly better. With 4 threads, CPU was able to get to key 943/1145 in only 5 minutes using the default driver (gesvdj) before the process ran out of memory. (I use WSL for my SD env).",
                                                        "author": {
                                                            "login": "mariaWitch"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1420705562",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Also, I am currently having an issue where moving beyond stage 1 causes a crash with the following backtrace on cpu.\nstage 1:  98%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258c | 1105/1131 [04:51<00:06,  3.79it/s]\nUsing already loaded model bbwm_Aurora.safetensors [431eebe43e]: done in 8.9s (send model to device: 8.9s)\n*** API error: POST: http://127.0.0.1:7860/bbwm/merge-models {'error': 'RuntimeError', 'detail': '', 'body': '', 'errors': 'torch.linalg.eig: input tensor should not contain infs or NaNs.'}\n    Traceback (most recent call last):\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/anyio/streams/memory.py\", line 98, in receive\n        return self.receive_nowait()\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n        raise WouldBlock\n    anyio.WouldBlock\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/middleware/base.py\", line 78, in call_next\n        message = await recv_stream.receive()\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/anyio/streams/memory.py\", line 118, in receive\n        raise EndOfStream\n    anyio.EndOfStream\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/modules/api/api.py\", line 187, in exception_handling\n        return await call_next(request)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/middleware/base.py\", line 84, in call_next\n        raise app_exc\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/middleware/base.py\", line 70, in coro\n        await self.app(scope, receive_or_disconnect, send_no_error)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/middleware/base.py\", line 108, in __call__\n        response = await self.dispatch_func(request, call_next)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/modules/api/api.py\", line 151, in log_and_time\n        res: Response = await call_next(req)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/middleware/base.py\", line 84, in call_next\n        raise app_exc\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/middleware/base.py\", line 70, in coro\n        await self.app(scope, receive_or_disconnect, send_no_error)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/middleware/cors.py\", line 84, in __call__\n        await self.app(scope, receive, send)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/middleware/gzip.py\", line 24, in __call__\n        await responder(scope, receive, send)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/middleware/gzip.py\", line 44, in __call__\n        await self.app(scope, receive, self.send_with_gzip)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n        raise exc\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n        await self.app(scope, receive, sender)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py\", line 21, in __call__\n        raise e\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n        await self.app(scope, receive, send)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/routing.py\", line 718, in __call__\n        await route.handle(scope, receive, send)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/routing.py\", line 276, in handle\n        await self.app(scope, receive, send)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/starlette/routing.py\", line 66, in app\n        response = await func(request)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/fastapi/routing.py\", line 237, in app\n        raw_response = await run_endpoint_function(\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/fastapi/routing.py\", line 163, in run_endpoint_function\n        return await dependant.call(**values)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/extensions/sd-webui-bayesian-merger/scripts/api.py\", line 78, in merge_models_api\n        merged = merge_models(\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/sd_meh/merge.py\", line 162, in merge_models\n        merged = simple_merge(\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/sd_meh/merge.py\", line 245, in simple_merge\n        res.result()\n      File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 451, in result\n        return self.__get_result()\n      File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 403, in __get_result\n        raise self._exception\n      File \"/usr/lib/python3.10/concurrent/futures/thread.py\", line 58, in run\n        result = self.fn(*self.args, **self.kwargs)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/sd_meh/merge.py\", line 353, in simple_merge_key\n        with merge_key_context(key, thetas, *args, **kwargs) as result:\n      File \"/usr/lib/python3.10/contextlib.py\", line 135, in __enter__\n        return next(self.gen)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/sd_meh/merge.py\", line 450, in merge_key_context\n        result = merge_key(*args, **kwargs)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/sd_meh/merge.py\", line 422, in merge_key\n        merged_key = merge_method(**merge_args).to(device)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/sd_meh/merge_methods.py\", line 252, in rotate\n        transform = fractional_matrix_power(transform, alpha)\n      File \"/home/maria/stable-diffusion/stable-diffusion-webui/venv/lib/python3.10/site-packages/sd_meh/merge_methods.py\", line 272, in fractional_matrix_power\n        eigenvalues, eigenvectors = torch.linalg.eig(matrix)\n    RuntimeError: torch.linalg.eig: input tensor should not contain infs or NaNs.\n\n---",
                                                        "author": {
                                                            "login": "mariaWitch"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1420789172",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "on CPU [...] the performance is significantly better\n\n5 minutes is the time it takes on my system to merge on cuda with the gesvd driver. I'll see if I get a speed discount on cpu with gesvdj with 10 threads.\n\nAlso, I am currently having an issue where moving beyond stage 1 causes a crash with the following backtrace on cpu.\n\nAlthough I am not testing rotation through the bbmw API, even though I haven't seen this error before, it is probably caused by the merge method and not the API. It seems to be near the end of stage 1 (still in it because the exception is raised inside the merge method). It seems to be caused by imprecision in the svd calculation. It is possible that full_matrices=False is the cause, if it isn't because we are using the gesvdj driver on cpu.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1420934119",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Reading from the docs, it doesn't seem to be possible to pick a specific driver if the device is not cuda:\n\nThe driver kwarg may be used in CUDA with a cuSOLVER backend to choose the algorithm used to compute the SVD. The choice of a driver is a trade-off between accuracy and speed.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1420974208",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Sometimes torch.linalg.cond(a_neurons.T @ b_neurons) is very large (~1.0e+15) and at other times it is < 1000. According to the docs:\n\n\nIf A is well-conditioned (its condition number is not too large), or you do not mind some precision loss.\n\nFor a general matrix: \u2018gesvdj\u2019 (Jacobi method)\nIf A is tall or wide (m >> n or m << n): \u2018gesvda\u2019 (Approximate method)\n\n\n\n\nSo gesvda is definitely not appropriate, and gesvdj seems to be sometimes (but most keys seem to have a large cond experimentally). Calculating torch.linalg.cond takes a bit of time, so it may or may not be worth it to switch to gesvdj conditionally.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1420981246",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Do you know how I can install pytorch_xla? I'm not able to run the pip install here:\nhttps://github.com/pytorch/xla/#getting-started\n\nLooking in links: https://storage.googleapis.com/libtpu-releases/index.html\nRequirement already satisfied: torch~=2.1.0 in d:\\src\\meh-dev\\venv\\lib\\site-packages (2.1.1+cu118)\nERROR: Could not find a version that satisfies the requirement torch_xla[tpu]~=2.1.0 (from versions: 1.0)\nERROR: No matching distribution found for torch_xla[tpu]~=2.1.0",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1420989703",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "The quickest run I could get was under 5 minutes (~4m45s) using --work_device cuda and --threads 10 with the current code in the PR. IIUC threads are useful here to reduce the overhead of tensors being copied to another device.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1421020571",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "So I actually did a test with a full matrices turned on and the issue still occurred. So I'm not sure what is causing it.",
                                                        "author": {
                                                            "login": "mariaWitch"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1421053962",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Do you know how I can install pytorch_xla? I'm not able to run the pip install here: https://github.com/pytorch/xla/#getting-started\n\nLooking in links: https://storage.googleapis.com/libtpu-releases/index.html\nRequirement already satisfied: torch~=2.1.0 in d:\\src\\meh-dev\\venv\\lib\\site-packages (2.1.1+cu118)\nERROR: Could not find a version that satisfies the requirement torch_xla[tpu]~=2.1.0 (from versions: 1.0)\nERROR: No matching distribution found for torch_xla[tpu]~=2.1.0\n\n\n\nSo when I referenced XLA, I was using it in the context of JAX, where you precompile your function using the XLA JIT with JAX, and then go from there. You can interoperate PyTorch and JAX using DLpacks so there shouldn't be any issues with type compatibility, the notation might get a little messy though.",
                                                        "author": {
                                                            "login": "mariaWitch"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1421059162",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "By the way full_matrices=False doesn't produce a reduced SVD when $m=n$ ($m$ and $n$ being the width and height of the svd input). That's why it didn't seem to affect generation speed. We might want to remove it as it doesn't really change anything, since the input to the svd is always a square covariance matrix here.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1421067944",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "So I did complete a full merge on CUDA, and didn't receive the error. I think it has something to do with trying to move models between the CPU and GPU, interacting with WebUI keeping models loaded in memory. Is there sanity checking when the models are loaded to ensure that they have been moved to CPU if the work_device is set to CPU?",
                                                        "author": {
                                                            "login": "mariaWitch"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1423142229",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Before merging, when assembling the merge args, the weights are sent to the requested device:\n\n  \n    \n      meh/sd_meh/merge.py\n    \n    \n        Lines 465 to 466\n      in\n      2780321\n    \n  \n  \n    \n\n        \n          \n           \"a\": thetas[\"model_a\"][key].to(work_device), \n        \n\n        \n          \n           \"b\": thetas[\"model_b\"][key].to(work_device), \n        \n    \n  \n\n\nnote that if work_device is None, it takes the value of device:\n\n  \n    \n      meh/sd_meh/merge.py\n    \n    \n        Lines 371 to 372\n      in\n      2780321\n    \n  \n  \n    \n\n        \n          \n           if work_device is None: \n        \n\n        \n          \n               work_device = device \n        \n    \n  \n\n\nSo IIUC, it shouldn't be a device issue.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1423394967",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "I think I found the culprit.\nIt seems that on CPU there isn't enough precision sometimes, which leads too $U$ or $V^T$ having a determinant of 0. This is not what SVD should output, $U$ and $V^T$ should always be orthogonal transforms, which implies $|det U| = |det V^T| = 1$.\nWhen the determinant of $U$ or $V^T$ is 0, then this line divides by 0:\n        u[:, -1] /= torch.det(u) * torch.det(v_t)\nSo the last column of u sometimes is filled with infinities. Then, when trying to compute the eigenvalues of the matrix, an error is then raised.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1429383612",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "node": {
                                        "state": "COMMENTED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "As noted below, while this prevents the entire merge from raising an error, rotations with invalid determinants still result in a broken merge. I went the other direction and raised an error instead.",
                                                        "author": {
                                                            "login": "ljleb"
                                                        },
                                                        "url": "https://github.com/s1dlx/meh/pull/50#discussion_r1429469484",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "a6742b3",
                                                            "authoredDate": "2023-11-21T00:11:01Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        }
                    ]
                },
                {
                    "node": {
                        "number": 1061,
                        "title": "CC-859 add stripe invoice details",
                        "repository": {
                            "nameWithOwner": "codecrafters-io/frontend",
                            "primaryLanguage": {
                                "name": "JavaScript"
                            }
                        },
                        "createdAt": "2023-12-08T03:22:16Z",
                        "mergedAt": "2023-12-13T16:35:11Z",
                        "url": "https://github.com/codecrafters-io/frontend/pull/1061",
                        "state": "MERGED",
                        "author": {
                            "login": "libmartinito"
                        },
                        "editor": {
                            "login": "libmartinito"
                        },
                        "body": "**Checklist**:\r\n\r\n- [x] I've thoroughly self-reviewed my changes\r\n- [x] I've added tests for my changes, unless they affect admin-only areas (or are otherwise not worth testing)\r\n- [x] I've verified any visual changes using Percy (add a commit with `[percy]` in the message to trigger)\r\n",
                        "reviews": {
                            "edges": [
                                {
                                    "node": {
                                        "state": "APPROVED",
                                        "bodyText": "",
                                        "comments": {
                                            "edges": [
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n              @tracked isExtraInvoiceDetailsRequested = false;\n          \n          \n            \n              @tracked extraInvoiceDetailsRequested = false;",
                                                        "author": {
                                                            "login": "rohitpaulk"
                                                        },
                                                        "url": "https://github.com/codecrafters-io/frontend/pull/1061#discussion_r1420466104",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "f33f5d6",
                                                            "authoredDate": "2023-12-08T09:20:03Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Our naming pattern is to use handleClick for handlers within the class, and @onClick for args - to be consistent I'd name this arg @onStartMembershipButtonClick",
                                                        "author": {
                                                            "login": "rohitpaulk"
                                                        },
                                                        "url": "https://github.com/codecrafters-io/frontend/pull/1061#discussion_r1420469067",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "f33f5d6",
                                                            "authoredDate": "2023-12-08T09:20:03Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Let's add a space between the service declarations and the rest (not sure how we ended up without it here)",
                                                        "author": {
                                                            "login": "rohitpaulk"
                                                        },
                                                        "url": "https://github.com/codecrafters-io/frontend/pull/1061#discussion_r1420470335",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "f33f5d6",
                                                            "authoredDate": "2023-12-08T09:20:03Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Bad naming, this should be something like selectedPricingFrequency.\nReasoning: https://chat.openai.com/share/d668d64c-182e-4e9d-8e17-6517d91fc65e\n@libmartinito we don't seem to be getting better with naming - I'd strongly suggest spending more time on this. Read books, talk to chatgpt about it, try to identify cases where our naming is wrong and ask me clarifying questions, do whatever it takes - usually these problems go away in a couple of months, doesn't seem to be happening so we need to pay extra attention to it",
                                                        "author": {
                                                            "login": "rohitpaulk"
                                                        },
                                                        "url": "https://github.com/codecrafters-io/frontend/pull/1061#discussion_r1420472117",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "f33f5d6",
                                                            "authoredDate": "2023-12-08T09:20:03Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Suggested change\n      \n    \n    \n      \n          \n            \n                    @handleStartMembershipButtonClick={{this.handleStartMembershipButtonClick}}\n          \n          \n            \n                    @onStartMembershipButtonClick={{this.handleStartMembershipButtonClick}}",
                                                        "author": {
                                                            "login": "rohitpaulk"
                                                        },
                                                        "url": "https://github.com/codecrafters-io/frontend/pull/1061#discussion_r1420477957",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "f33f5d6",
                                                            "authoredDate": "2023-12-08T09:20:03Z"
                                                        }
                                                    }
                                                },
                                                {
                                                    "node": {
                                                        "bodyText": "Feel like this whole function could be far simpler:\nreturn {\n  pricingFrequency: this.selectedPricingFrequency,\n  regionalDiscount: this.shouldApplyRegionalDiscount ? this.model.regionalDiscount : null,\n  earlyBirdDiscountEnabled: this.selectedPricingFrequency == \"yearly\" && this.user.isEligibleForEarlyBirdDiscount,\n  referralDiscountEnabled: this.selectedPricingFrequency == \"yearly\" && this.user.isEligibleForReferralDiscount\n}",
                                                        "author": {
                                                            "login": "rohitpaulk"
                                                        },
                                                        "url": "https://github.com/codecrafters-io/frontend/pull/1061#discussion_r1420511531",
                                                        "originalCommit": {
                                                            "abbreviatedOid": "f33f5d6",
                                                            "authoredDate": "2023-12-08T09:20:03Z"
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "textMatches": [
                        {
                            "property": "comments.body"
                        }
                    ]
                }
            ],
            "pageInfo": {
                "endCursor": "Y3Vyc29yOjUw",
                "hasNextPage": true,
                "hasPreviousPage": true,
                "startCursor": "Y3Vyc29yOjQx"
            },
            "issueCount": 101
        }
    }
}